{"ast":null,"code":"\"use strict\";\n\n(function (root, factory) {\n  if (typeof exports === 'object') {\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    define(['jquery', 'googlemaps!'], factory);\n  } else {\n    root.GMaps = factory();\n  }\n})(this, function () {\n  /*!\n   * GMaps.js v0.4.25\n   * http://hpneo.github.com/gmaps/\n   *\n   * Copyright 2017, Gustavo Leon\n   * Released under the MIT License.\n   */\n\n  var extend_object = function (obj, new_obj) {\n    var name;\n    if (obj === new_obj) {\n      return obj;\n    }\n    for (name in new_obj) {\n      if (new_obj[name] !== undefined) {\n        obj[name] = new_obj[name];\n      }\n    }\n    return obj;\n  };\n  var replace_object = function (obj, replace) {\n    var name;\n    if (obj === replace) {\n      return obj;\n    }\n    for (name in replace) {\n      if (obj[name] != undefined) {\n        obj[name] = replace[name];\n      }\n    }\n    return obj;\n  };\n  var array_map = function (array, callback) {\n    var original_callback_params = Array.prototype.slice.call(arguments, 2),\n      array_return = [],\n      array_length = array.length,\n      i;\n    if (Array.prototype.map && array.map === Array.prototype.map) {\n      array_return = Array.prototype.map.call(array, function (item) {\n        var callback_params = original_callback_params.slice(0);\n        callback_params.splice(0, 0, item);\n        return callback.apply(this, callback_params);\n      });\n    } else {\n      for (i = 0; i < array_length; i++) {\n        callback_params = original_callback_params;\n        callback_params.splice(0, 0, array[i]);\n        array_return.push(callback.apply(this, callback_params));\n      }\n    }\n    return array_return;\n  };\n  var array_flat = function (array) {\n    var new_array = [],\n      i;\n    for (i = 0; i < array.length; i++) {\n      new_array = new_array.concat(array[i]);\n    }\n    return new_array;\n  };\n  var coordsToLatLngs = function (coords, useGeoJSON) {\n    var first_coord = coords[0],\n      second_coord = coords[1];\n    if (useGeoJSON) {\n      first_coord = coords[1];\n      second_coord = coords[0];\n    }\n    return new google.maps.LatLng(first_coord, second_coord);\n  };\n  var arrayToLatLng = function (coords, useGeoJSON) {\n    var i;\n    for (i = 0; i < coords.length; i++) {\n      if (!(coords[i] instanceof google.maps.LatLng)) {\n        if (coords[i].length > 0 && typeof coords[i][0] === \"object\") {\n          coords[i] = arrayToLatLng(coords[i], useGeoJSON);\n        } else {\n          coords[i] = coordsToLatLngs(coords[i], useGeoJSON);\n        }\n      }\n    }\n    return coords;\n  };\n  var getElementsByClassName = function (class_name, context) {\n    var element,\n      _class = class_name.replace('.', '');\n    if ('jQuery' in this && context) {\n      element = $(\".\" + _class, context)[0];\n    } else {\n      element = document.getElementsByClassName(_class)[0];\n    }\n    return element;\n  };\n  var getElementById = function (id, context) {\n    var element,\n      id = id.replace('#', '');\n    if ('jQuery' in window && context) {\n      element = $('#' + id, context)[0];\n    } else {\n      element = document.getElementById(id);\n    }\n    ;\n    return element;\n  };\n  var findAbsolutePosition = function (obj) {\n    var curleft = 0,\n      curtop = 0;\n    if (obj.getBoundingClientRect) {\n      var rect = obj.getBoundingClientRect();\n      var sx = -(window.scrollX ? window.scrollX : window.pageXOffset);\n      var sy = -(window.scrollY ? window.scrollY : window.pageYOffset);\n      return [rect.left - sx, rect.top - sy];\n    }\n    if (obj.offsetParent) {\n      do {\n        curleft += obj.offsetLeft;\n        curtop += obj.offsetTop;\n      } while (obj = obj.offsetParent);\n    }\n    return [curleft, curtop];\n  };\n  var GMaps = function (global) {\n    \"use strict\";\n\n    var doc = document;\n    /**\n     * Creates a new GMaps instance, including a Google Maps map.\n     * @class GMaps\n     * @constructs\n     * @param {object} options - `options` accepts all the [MapOptions](https://developers.google.com/maps/documentation/javascript/reference#MapOptions) and [events](https://developers.google.com/maps/documentation/javascript/reference#Map) listed in the Google Maps API. Also accepts:\n     * * `lat` (number): Latitude of the map's center\n     * * `lng` (number): Longitude of the map's center\n     * * `el` (string or HTMLElement): container where the map will be rendered\n     * * `markerClusterer` (function): A function to create a marker cluster. You can use MarkerClusterer or MarkerClustererPlus.\n     */\n    var GMaps = function (options) {\n      if (!(typeof window.google === 'object' && window.google.maps)) {\n        if (typeof window.console === 'object' && window.console.error) {\n          console.error('Google Maps API is required. Please register the following JavaScript library https://maps.googleapis.com/maps/api/js.');\n        }\n        return function () {};\n      }\n      if (!this) return new GMaps(options);\n      options.zoom = options.zoom || 15;\n      options.mapType = options.mapType || 'roadmap';\n      var valueOrDefault = function (value, defaultValue) {\n        return value === undefined ? defaultValue : value;\n      };\n      var self = this,\n        i,\n        events_that_hide_context_menu = ['bounds_changed', 'center_changed', 'click', 'dblclick', 'drag', 'dragend', 'dragstart', 'idle', 'maptypeid_changed', 'projection_changed', 'resize', 'tilesloaded', 'zoom_changed'],\n        events_that_doesnt_hide_context_menu = ['mousemove', 'mouseout', 'mouseover'],\n        options_to_be_deleted = ['el', 'lat', 'lng', 'mapType', 'width', 'height', 'markerClusterer', 'enableNewStyle'],\n        identifier = options.el || options.div,\n        markerClustererFunction = options.markerClusterer,\n        mapType = google.maps.MapTypeId[options.mapType.toUpperCase()],\n        map_center = new google.maps.LatLng(options.lat, options.lng),\n        zoomControl = valueOrDefault(options.zoomControl, true),\n        zoomControlOpt = options.zoomControlOpt || {\n          style: 'DEFAULT',\n          position: 'TOP_LEFT'\n        },\n        zoomControlStyle = zoomControlOpt.style || 'DEFAULT',\n        zoomControlPosition = zoomControlOpt.position || 'TOP_LEFT',\n        panControl = valueOrDefault(options.panControl, true),\n        mapTypeControl = valueOrDefault(options.mapTypeControl, true),\n        scaleControl = valueOrDefault(options.scaleControl, true),\n        streetViewControl = valueOrDefault(options.streetViewControl, true),\n        overviewMapControl = valueOrDefault(overviewMapControl, true),\n        map_options = {},\n        map_base_options = {\n          zoom: this.zoom,\n          center: map_center,\n          mapTypeId: mapType\n        },\n        map_controls_options = {\n          panControl: panControl,\n          zoomControl: zoomControl,\n          zoomControlOptions: {\n            style: google.maps.ZoomControlStyle[zoomControlStyle],\n            position: google.maps.ControlPosition[zoomControlPosition]\n          },\n          mapTypeControl: mapTypeControl,\n          scaleControl: scaleControl,\n          streetViewControl: streetViewControl,\n          overviewMapControl: overviewMapControl\n        };\n      if (typeof options.el === 'string' || typeof options.div === 'string') {\n        if (identifier.indexOf(\"#\") > -1) {\n          /**\n           * Container element\n           *\n           * @type {HTMLElement}\n           */\n          this.el = getElementById(identifier, options.context);\n        } else {\n          this.el = getElementsByClassName.apply(this, [identifier, options.context]);\n        }\n      } else {\n        this.el = identifier;\n      }\n      if (typeof this.el === 'undefined' || this.el === null) {\n        throw 'No element defined.';\n      }\n      window.context_menu = window.context_menu || {};\n      window.context_menu[self.el.id] = {};\n\n      /**\n       * Collection of custom controls in the map UI\n       *\n       * @type {array}\n       */\n      this.controls = [];\n      /**\n       * Collection of map's overlays\n       *\n       * @type {array}\n       */\n      this.overlays = [];\n      /**\n       * Collection of KML/GeoRSS and FusionTable layers\n       *\n       * @type {array}\n       */\n      this.layers = [];\n      /**\n       * Collection of data layers (See {@link GMaps#addLayer})\n       *\n       * @type {object}\n       */\n      this.singleLayers = {};\n      /**\n       * Collection of map's markers\n       *\n       * @type {array}\n       */\n      this.markers = [];\n      /**\n       * Collection of map's lines\n       *\n       * @type {array}\n       */\n      this.polylines = [];\n      /**\n       * Collection of map's routes requested by {@link GMaps#getRoutes}, {@link GMaps#renderRoute}, {@link GMaps#drawRoute}, {@link GMaps#travelRoute} or {@link GMaps#drawSteppedRoute}\n       *\n       * @type {array}\n       */\n      this.routes = [];\n      /**\n       * Collection of map's polygons\n       *\n       * @type {array}\n       */\n      this.polygons = [];\n      this.infoWindow = null;\n      this.overlay_el = null;\n      /**\n       * Current map's zoom\n       *\n       * @type {number}\n       */\n      this.zoom = options.zoom;\n      this.registered_events = {};\n      this.el.style.width = options.width || this.el.scrollWidth || this.el.offsetWidth;\n      this.el.style.height = options.height || this.el.scrollHeight || this.el.offsetHeight;\n      google.maps.visualRefresh = options.enableNewStyle;\n      for (i = 0; i < options_to_be_deleted.length; i++) {\n        delete options[options_to_be_deleted[i]];\n      }\n      if (options.disableDefaultUI != true) {\n        map_base_options = extend_object(map_base_options, map_controls_options);\n      }\n      map_options = extend_object(map_base_options, options);\n      for (i = 0; i < events_that_hide_context_menu.length; i++) {\n        delete map_options[events_that_hide_context_menu[i]];\n      }\n      for (i = 0; i < events_that_doesnt_hide_context_menu.length; i++) {\n        delete map_options[events_that_doesnt_hide_context_menu[i]];\n      }\n\n      /**\n       * Google Maps map instance\n       *\n       * @type {google.maps.Map}\n       */\n      this.map = new google.maps.Map(this.el, map_options);\n      if (markerClustererFunction) {\n        /**\n         * Marker Clusterer instance\n         *\n         * @type {object}\n         */\n        this.markerClusterer = markerClustererFunction.apply(this, [this.map]);\n      }\n      var buildContextMenuHTML = function (control, e) {\n        var html = '',\n          options = window.context_menu[self.el.id][control];\n        for (var i in options) {\n          if (options.hasOwnProperty(i)) {\n            var option = options[i];\n            html += '<li><a id=\"' + control + '_' + i + '\" href=\"#\">' + option.title + '</a></li>';\n          }\n        }\n        if (!getElementById('gmaps_context_menu')) return;\n        var context_menu_element = getElementById('gmaps_context_menu');\n        context_menu_element.innerHTML = html;\n        var context_menu_items = context_menu_element.getElementsByTagName('a'),\n          context_menu_items_count = context_menu_items.length,\n          i;\n        for (i = 0; i < context_menu_items_count; i++) {\n          var context_menu_item = context_menu_items[i];\n          var assign_menu_item_action = function (ev) {\n            ev.preventDefault();\n            options[this.id.replace(control + '_', '')].action.apply(self, [e]);\n            self.hideContextMenu();\n          };\n          google.maps.event.clearListeners(context_menu_item, 'click');\n          google.maps.event.addDomListenerOnce(context_menu_item, 'click', assign_menu_item_action, false);\n        }\n        var position = findAbsolutePosition.apply(this, [self.el]),\n          left = position[0] + e.pixel.x - 15,\n          top = position[1] + e.pixel.y - 15;\n        context_menu_element.style.left = left + \"px\";\n        context_menu_element.style.top = top + \"px\";\n\n        // context_menu_element.style.display = 'block';\n      };\n      this.buildContextMenu = function (control, e) {\n        if (control === 'marker') {\n          e.pixel = {};\n          var overlay = new google.maps.OverlayView();\n          overlay.setMap(self.map);\n          overlay.draw = function () {\n            var projection = overlay.getProjection(),\n              position = e.marker.getPosition();\n            e.pixel = projection.fromLatLngToContainerPixel(position);\n            buildContextMenuHTML(control, e);\n          };\n        } else {\n          buildContextMenuHTML(control, e);\n        }\n        var context_menu_element = getElementById('gmaps_context_menu');\n        setTimeout(function () {\n          context_menu_element.style.display = 'block';\n        }, 0);\n      };\n\n      /**\n       * Add a context menu for a map or a marker.\n       *\n       * @param {object} options - The `options` object should contain:\n       * * `control` (string): Kind of control the context menu will be attached. Can be \"map\" or \"marker\".\n       * * `options` (array): A collection of context menu items:\n       *   * `title` (string): Item's title shown in the context menu.\n       *   * `name` (string): Item's identifier.\n       *   * `action` (function): Function triggered after selecting the context menu item.\n       */\n      this.setContextMenu = function (options) {\n        window.context_menu[self.el.id][options.control] = {};\n        var i,\n          ul = doc.createElement('ul');\n        for (i in options.options) {\n          if (options.options.hasOwnProperty(i)) {\n            var option = options.options[i];\n            window.context_menu[self.el.id][options.control][option.name] = {\n              title: option.title,\n              action: option.action\n            };\n          }\n        }\n        ul.id = 'gmaps_context_menu';\n        ul.style.display = 'none';\n        ul.style.position = 'absolute';\n        ul.style.minWidth = '100px';\n        ul.style.background = 'white';\n        ul.style.listStyle = 'none';\n        ul.style.padding = '8px';\n        ul.style.boxShadow = '2px 2px 6px #ccc';\n        if (!getElementById('gmaps_context_menu')) {\n          doc.body.appendChild(ul);\n        }\n        var context_menu_element = getElementById('gmaps_context_menu');\n        google.maps.event.addDomListener(context_menu_element, 'mouseout', function (ev) {\n          if (!ev.relatedTarget || !this.contains(ev.relatedTarget)) {\n            window.setTimeout(function () {\n              context_menu_element.style.display = 'none';\n            }, 400);\n          }\n        }, false);\n      };\n\n      /**\n       * Hide the current context menu\n       */\n      this.hideContextMenu = function () {\n        var context_menu_element = getElementById('gmaps_context_menu');\n        if (context_menu_element) {\n          context_menu_element.style.display = 'none';\n        }\n      };\n      var setupListener = function (object, name) {\n        google.maps.event.addListener(object, name, function (e) {\n          if (e == undefined) {\n            e = this;\n          }\n          options[name].apply(this, [e]);\n          self.hideContextMenu();\n        });\n      };\n\n      //google.maps.event.addListener(this.map, 'idle', this.hideContextMenu);\n      google.maps.event.addListener(this.map, 'zoom_changed', this.hideContextMenu);\n      for (var ev = 0; ev < events_that_hide_context_menu.length; ev++) {\n        var name = events_that_hide_context_menu[ev];\n        if (name in options) {\n          setupListener(this.map, name);\n        }\n      }\n      for (var ev = 0; ev < events_that_doesnt_hide_context_menu.length; ev++) {\n        var name = events_that_doesnt_hide_context_menu[ev];\n        if (name in options) {\n          setupListener(this.map, name);\n        }\n      }\n      google.maps.event.addListener(this.map, 'rightclick', function (e) {\n        if (options.rightclick) {\n          options.rightclick.apply(this, [e]);\n        }\n        if (window.context_menu[self.el.id]['map'] != undefined) {\n          self.buildContextMenu('map', e);\n        }\n      });\n\n      /**\n       * Trigger a `resize` event, useful if you need to repaint the current map (for changes in the viewport or display / hide actions).\n       */\n      this.refresh = function () {\n        google.maps.event.trigger(this.map, 'resize');\n      };\n\n      /**\n       * Adjust the map zoom to include all the markers added in the map.\n       */\n      this.fitZoom = function () {\n        var latLngs = [],\n          markers_length = this.markers.length,\n          i;\n        for (i = 0; i < markers_length; i++) {\n          if (typeof this.markers[i].visible === 'boolean' && this.markers[i].visible) {\n            latLngs.push(this.markers[i].getPosition());\n          }\n        }\n        this.fitLatLngBounds(latLngs);\n      };\n\n      /**\n       * Adjust the map zoom to include all the coordinates in the `latLngs` array.\n       *\n       * @param {array} latLngs - Collection of `google.maps.LatLng` objects.\n       */\n      this.fitLatLngBounds = function (latLngs) {\n        var total = latLngs.length,\n          bounds = new google.maps.LatLngBounds(),\n          i;\n        for (i = 0; i < total; i++) {\n          bounds.extend(latLngs[i]);\n        }\n        this.map.fitBounds(bounds);\n      };\n\n      /**\n       * Center the map using the `lat` and `lng` coordinates.\n       *\n       * @param {number} lat - Latitude of the coordinate.\n       * @param {number} lng - Longitude of the coordinate.\n       * @param {function} [callback] - Callback that will be executed after the map is centered.\n       */\n      this.setCenter = function (lat, lng, callback) {\n        this.map.panTo(new google.maps.LatLng(lat, lng));\n        if (callback) {\n          callback();\n        }\n      };\n\n      /**\n       * Return the HTML element container of the map.\n       *\n       * @returns {HTMLElement} the element container.\n       */\n      this.getElement = function () {\n        return this.el;\n      };\n\n      /**\n       * Increase the map's zoom.\n       *\n       * @param {number} [magnitude] - The number of times the map will be zoomed in.\n       */\n      this.zoomIn = function (value) {\n        value = value || 1;\n        this.zoom = this.map.getZoom() + value;\n        this.map.setZoom(this.zoom);\n      };\n\n      /**\n       * Decrease the map's zoom.\n       *\n       * @param {number} [magnitude] - The number of times the map will be zoomed out.\n       */\n      this.zoomOut = function (value) {\n        value = value || 1;\n        this.zoom = this.map.getZoom() - value;\n        this.map.setZoom(this.zoom);\n      };\n      var native_methods = [],\n        method;\n      for (method in this.map) {\n        if (typeof this.map[method] == 'function' && !this[method]) {\n          native_methods.push(method);\n        }\n      }\n      for (i = 0; i < native_methods.length; i++) {\n        (function (gmaps, scope, method_name) {\n          gmaps[method_name] = function () {\n            return scope[method_name].apply(scope, arguments);\n          };\n        })(this, this.map, native_methods[i]);\n      }\n    };\n    return GMaps;\n  }(this);\n  GMaps.prototype.createControl = function (options) {\n    var control = document.createElement('div');\n    control.style.cursor = 'pointer';\n    if (options.disableDefaultStyles !== true) {\n      control.style.fontFamily = 'Roboto, Arial, sans-serif';\n      control.style.fontSize = '11px';\n      control.style.boxShadow = 'rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px';\n    }\n    for (var option in options.style) {\n      control.style[option] = options.style[option];\n    }\n    if (options.id) {\n      control.id = options.id;\n    }\n    if (options.title) {\n      control.title = options.title;\n    }\n    if (options.classes) {\n      control.className = options.classes;\n    }\n    if (options.content) {\n      if (typeof options.content === 'string') {\n        control.innerHTML = options.content;\n      } else if (options.content instanceof HTMLElement) {\n        control.appendChild(options.content);\n      }\n    }\n    if (options.position) {\n      control.position = google.maps.ControlPosition[options.position.toUpperCase()];\n    }\n    for (var ev in options.events) {\n      (function (object, name) {\n        google.maps.event.addDomListener(object, name, function () {\n          options.events[name].apply(this, [this]);\n        });\n      })(control, ev);\n    }\n    control.index = 1;\n    return control;\n  };\n\n  /**\n   * Add a custom control to the map UI.\n   *\n   * @param {object} options - The `options` object should contain:\n   * * `style` (object): The keys and values of this object should be valid CSS properties and values.\n   * * `id` (string): The HTML id for the custom control.\n   * * `classes` (string): A string containing all the HTML classes for the custom control.\n   * * `content` (string or HTML element): The content of the custom control.\n   * * `position` (string): Any valid [`google.maps.ControlPosition`](https://developers.google.com/maps/documentation/javascript/controls#ControlPositioning) value, in lower or upper case.\n   * * `events` (object): The keys of this object should be valid DOM events. The values should be functions.\n   * * `disableDefaultStyles` (boolean): If false, removes the default styles for the controls like font (family and size), and box shadow.\n   * @returns {HTMLElement}\n   */\n  GMaps.prototype.addControl = function (options) {\n    var control = this.createControl(options);\n    this.controls.push(control);\n    this.map.controls[control.position].push(control);\n    return control;\n  };\n\n  /**\n   * Remove a control from the map. `control` should be a control returned by `addControl()`.\n   *\n   * @param {HTMLElement} control - One of the controls returned by `addControl()`.\n   * @returns {HTMLElement} the removed control.\n   */\n  GMaps.prototype.removeControl = function (control) {\n    var position = null,\n      i;\n    for (i = 0; i < this.controls.length; i++) {\n      if (this.controls[i] == control) {\n        position = this.controls[i].position;\n        this.controls.splice(i, 1);\n      }\n    }\n    if (position) {\n      for (i = 0; i < this.map.controls.length; i++) {\n        var controlsForPosition = this.map.controls[control.position];\n        if (controlsForPosition.getAt(i) == control) {\n          controlsForPosition.removeAt(i);\n          break;\n        }\n      }\n    }\n    return control;\n  };\n  GMaps.prototype.createMarker = function (options) {\n    if (options.lat == undefined && options.lng == undefined && options.position == undefined) {\n      throw 'No latitude or longitude defined.';\n    }\n    var self = this,\n      details = options.details,\n      fences = options.fences,\n      outside = options.outside,\n      base_options = {\n        position: new google.maps.LatLng(options.lat, options.lng),\n        map: null\n      },\n      marker_options = extend_object(base_options, options);\n    delete marker_options.lat;\n    delete marker_options.lng;\n    delete marker_options.fences;\n    delete marker_options.outside;\n    var marker = new google.maps.Marker(marker_options);\n    marker.fences = fences;\n    if (options.infoWindow) {\n      marker.infoWindow = new google.maps.InfoWindow(options.infoWindow);\n      var info_window_events = ['closeclick', 'content_changed', 'domready', 'position_changed', 'zindex_changed'];\n      for (var ev = 0; ev < info_window_events.length; ev++) {\n        (function (object, name) {\n          if (options.infoWindow[name]) {\n            google.maps.event.addListener(object, name, function (e) {\n              options.infoWindow[name].apply(this, [e]);\n            });\n          }\n        })(marker.infoWindow, info_window_events[ev]);\n      }\n    }\n    var marker_events = ['animation_changed', 'clickable_changed', 'cursor_changed', 'draggable_changed', 'flat_changed', 'icon_changed', 'position_changed', 'shadow_changed', 'shape_changed', 'title_changed', 'visible_changed', 'zindex_changed'];\n    var marker_events_with_mouse = ['dblclick', 'drag', 'dragend', 'dragstart', 'mousedown', 'mouseout', 'mouseover', 'mouseup'];\n    for (var ev = 0; ev < marker_events.length; ev++) {\n      (function (object, name) {\n        if (options[name]) {\n          google.maps.event.addListener(object, name, function () {\n            options[name].apply(this, [this]);\n          });\n        }\n      })(marker, marker_events[ev]);\n    }\n    for (var ev = 0; ev < marker_events_with_mouse.length; ev++) {\n      (function (map, object, name) {\n        if (options[name]) {\n          google.maps.event.addListener(object, name, function (me) {\n            if (!me.pixel) {\n              me.pixel = map.getProjection().fromLatLngToPoint(me.latLng);\n            }\n            options[name].apply(this, [me]);\n          });\n        }\n      })(this.map, marker, marker_events_with_mouse[ev]);\n    }\n    google.maps.event.addListener(marker, 'click', function () {\n      this.details = details;\n      if (options.click) {\n        options.click.apply(this, [this]);\n      }\n      if (marker.infoWindow) {\n        self.hideInfoWindows();\n        marker.infoWindow.open(self.map, marker);\n      }\n    });\n    google.maps.event.addListener(marker, 'rightclick', function (e) {\n      e.marker = this;\n      if (options.rightclick) {\n        options.rightclick.apply(this, [e]);\n      }\n      if (window.context_menu[self.el.id]['marker'] != undefined) {\n        self.buildContextMenu('marker', e);\n      }\n    });\n    if (marker.fences) {\n      google.maps.event.addListener(marker, 'dragend', function () {\n        self.checkMarkerGeofence(marker, function (m, f) {\n          outside(m, f);\n        });\n      });\n    }\n    return marker;\n  };\n  GMaps.prototype.addMarker = function (options) {\n    var marker;\n    if (options.hasOwnProperty('gm_accessors_')) {\n      // Native google.maps.Marker object\n      marker = options;\n    } else {\n      if (options.hasOwnProperty('lat') && options.hasOwnProperty('lng') || options.position) {\n        marker = this.createMarker(options);\n      } else {\n        throw 'No latitude or longitude defined.';\n      }\n    }\n    marker.setMap(this.map);\n    if (this.markerClusterer) {\n      this.markerClusterer.addMarker(marker);\n    }\n    this.markers.push(marker);\n    GMaps.fire('marker_added', marker, this);\n    return marker;\n  };\n  GMaps.prototype.addMarkers = function (array) {\n    for (var i = 0, marker; marker = array[i]; i++) {\n      this.addMarker(marker);\n    }\n    return this.markers;\n  };\n  GMaps.prototype.hideInfoWindows = function () {\n    for (var i = 0, marker; marker = this.markers[i]; i++) {\n      if (marker.infoWindow) {\n        marker.infoWindow.close();\n      }\n    }\n  };\n  GMaps.prototype.removeMarker = function (marker) {\n    for (var i = 0; i < this.markers.length; i++) {\n      if (this.markers[i] === marker) {\n        this.markers[i].setMap(null);\n        this.markers.splice(i, 1);\n        if (this.markerClusterer) {\n          this.markerClusterer.removeMarker(marker);\n        }\n        GMaps.fire('marker_removed', marker, this);\n        break;\n      }\n    }\n    return marker;\n  };\n  GMaps.prototype.removeMarkers = function (collection) {\n    var new_markers = [];\n    if (typeof collection == 'undefined') {\n      for (var i = 0; i < this.markers.length; i++) {\n        var marker = this.markers[i];\n        marker.setMap(null);\n        GMaps.fire('marker_removed', marker, this);\n      }\n      if (this.markerClusterer && this.markerClusterer.clearMarkers) {\n        this.markerClusterer.clearMarkers();\n      }\n      this.markers = new_markers;\n    } else {\n      for (var i = 0; i < collection.length; i++) {\n        var index = this.markers.indexOf(collection[i]);\n        if (index > -1) {\n          var marker = this.markers[index];\n          marker.setMap(null);\n          if (this.markerClusterer) {\n            this.markerClusterer.removeMarker(marker);\n          }\n          GMaps.fire('marker_removed', marker, this);\n        }\n      }\n      for (var i = 0; i < this.markers.length; i++) {\n        var marker = this.markers[i];\n        if (marker.getMap() != null) {\n          new_markers.push(marker);\n        }\n      }\n      this.markers = new_markers;\n    }\n  };\n  GMaps.prototype.drawOverlay = function (options) {\n    var overlay = new google.maps.OverlayView(),\n      auto_show = true;\n    overlay.setMap(this.map);\n    if (options.auto_show != null) {\n      auto_show = options.auto_show;\n    }\n    overlay.onAdd = function () {\n      var el = document.createElement('div');\n      el.style.borderStyle = \"none\";\n      el.style.borderWidth = \"0px\";\n      el.style.position = \"absolute\";\n      el.style.zIndex = 100;\n      el.innerHTML = options.content;\n      overlay.el = el;\n      if (!options.layer) {\n        options.layer = 'overlayLayer';\n      }\n      var panes = this.getPanes(),\n        overlayLayer = panes[options.layer],\n        stop_overlay_events = ['contextmenu', 'DOMMouseScroll', 'dblclick', 'mousedown'];\n      overlayLayer.appendChild(el);\n      for (var ev = 0; ev < stop_overlay_events.length; ev++) {\n        (function (object, name) {\n          google.maps.event.addDomListener(object, name, function (e) {\n            if (navigator.userAgent.toLowerCase().indexOf('msie') != -1 && document.all) {\n              e.cancelBubble = true;\n              e.returnValue = false;\n            } else {\n              e.stopPropagation();\n            }\n          });\n        })(el, stop_overlay_events[ev]);\n      }\n      if (options.click) {\n        panes.overlayMouseTarget.appendChild(overlay.el);\n        google.maps.event.addDomListener(overlay.el, 'click', function () {\n          options.click.apply(overlay, [overlay]);\n        });\n      }\n      google.maps.event.trigger(this, 'ready');\n    };\n    overlay.draw = function () {\n      var projection = this.getProjection(),\n        pixel = projection.fromLatLngToDivPixel(new google.maps.LatLng(options.lat, options.lng));\n      options.horizontalOffset = options.horizontalOffset || 0;\n      options.verticalOffset = options.verticalOffset || 0;\n      var el = overlay.el,\n        content = el.children[0],\n        content_height = content.clientHeight,\n        content_width = content.clientWidth;\n      switch (options.verticalAlign) {\n        case 'top':\n          el.style.top = pixel.y - content_height + options.verticalOffset + 'px';\n          break;\n        default:\n        case 'middle':\n          el.style.top = pixel.y - content_height / 2 + options.verticalOffset + 'px';\n          break;\n        case 'bottom':\n          el.style.top = pixel.y + options.verticalOffset + 'px';\n          break;\n      }\n      switch (options.horizontalAlign) {\n        case 'left':\n          el.style.left = pixel.x - content_width + options.horizontalOffset + 'px';\n          break;\n        default:\n        case 'center':\n          el.style.left = pixel.x - content_width / 2 + options.horizontalOffset + 'px';\n          break;\n        case 'right':\n          el.style.left = pixel.x + options.horizontalOffset + 'px';\n          break;\n      }\n      el.style.display = auto_show ? 'block' : 'none';\n      if (!auto_show) {\n        options.show.apply(this, [el]);\n      }\n    };\n    overlay.onRemove = function () {\n      var el = overlay.el;\n      if (options.remove) {\n        options.remove.apply(this, [el]);\n      } else {\n        overlay.el.parentNode.removeChild(overlay.el);\n        overlay.el = null;\n      }\n    };\n    this.overlays.push(overlay);\n    return overlay;\n  };\n  GMaps.prototype.removeOverlay = function (overlay) {\n    for (var i = 0; i < this.overlays.length; i++) {\n      if (this.overlays[i] === overlay) {\n        this.overlays[i].setMap(null);\n        this.overlays.splice(i, 1);\n        break;\n      }\n    }\n  };\n  GMaps.prototype.removeOverlays = function () {\n    for (var i = 0, item; item = this.overlays[i]; i++) {\n      item.setMap(null);\n    }\n    this.overlays = [];\n  };\n  GMaps.prototype.drawPolyline = function (options) {\n    var path = [],\n      points = options.path;\n    if (points.length) {\n      if (points[0][0] === undefined) {\n        path = points;\n      } else {\n        for (var i = 0, latlng; latlng = points[i]; i++) {\n          path.push(new google.maps.LatLng(latlng[0], latlng[1]));\n        }\n      }\n    }\n    var polyline_options = {\n      map: this.map,\n      path: path,\n      strokeColor: options.strokeColor,\n      strokeOpacity: options.strokeOpacity,\n      strokeWeight: options.strokeWeight,\n      geodesic: options.geodesic,\n      clickable: true,\n      editable: false,\n      visible: true\n    };\n    if (options.hasOwnProperty(\"clickable\")) {\n      polyline_options.clickable = options.clickable;\n    }\n    if (options.hasOwnProperty(\"editable\")) {\n      polyline_options.editable = options.editable;\n    }\n    if (options.hasOwnProperty(\"icons\")) {\n      polyline_options.icons = options.icons;\n    }\n    if (options.hasOwnProperty(\"zIndex\")) {\n      polyline_options.zIndex = options.zIndex;\n    }\n    var polyline = new google.maps.Polyline(polyline_options);\n    var polyline_events = ['click', 'dblclick', 'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'rightclick'];\n    for (var ev = 0; ev < polyline_events.length; ev++) {\n      (function (object, name) {\n        if (options[name]) {\n          google.maps.event.addListener(object, name, function (e) {\n            options[name].apply(this, [e]);\n          });\n        }\n      })(polyline, polyline_events[ev]);\n    }\n    this.polylines.push(polyline);\n    GMaps.fire('polyline_added', polyline, this);\n    return polyline;\n  };\n  GMaps.prototype.removePolyline = function (polyline) {\n    for (var i = 0; i < this.polylines.length; i++) {\n      if (this.polylines[i] === polyline) {\n        this.polylines[i].setMap(null);\n        this.polylines.splice(i, 1);\n        GMaps.fire('polyline_removed', polyline, this);\n        break;\n      }\n    }\n  };\n  GMaps.prototype.removePolylines = function () {\n    for (var i = 0, item; item = this.polylines[i]; i++) {\n      item.setMap(null);\n    }\n    this.polylines = [];\n  };\n  GMaps.prototype.drawCircle = function (options) {\n    options = extend_object({\n      map: this.map,\n      center: new google.maps.LatLng(options.lat, options.lng)\n    }, options);\n    delete options.lat;\n    delete options.lng;\n    var polygon = new google.maps.Circle(options),\n      polygon_events = ['click', 'dblclick', 'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'rightclick'];\n    for (var ev = 0; ev < polygon_events.length; ev++) {\n      (function (object, name) {\n        if (options[name]) {\n          google.maps.event.addListener(object, name, function (e) {\n            options[name].apply(this, [e]);\n          });\n        }\n      })(polygon, polygon_events[ev]);\n    }\n    this.polygons.push(polygon);\n    return polygon;\n  };\n  GMaps.prototype.drawRectangle = function (options) {\n    options = extend_object({\n      map: this.map\n    }, options);\n    var latLngBounds = new google.maps.LatLngBounds(new google.maps.LatLng(options.bounds[0][0], options.bounds[0][1]), new google.maps.LatLng(options.bounds[1][0], options.bounds[1][1]));\n    options.bounds = latLngBounds;\n    var polygon = new google.maps.Rectangle(options),\n      polygon_events = ['click', 'dblclick', 'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'rightclick'];\n    for (var ev = 0; ev < polygon_events.length; ev++) {\n      (function (object, name) {\n        if (options[name]) {\n          google.maps.event.addListener(object, name, function (e) {\n            options[name].apply(this, [e]);\n          });\n        }\n      })(polygon, polygon_events[ev]);\n    }\n    this.polygons.push(polygon);\n    return polygon;\n  };\n  GMaps.prototype.drawPolygon = function (options) {\n    var useGeoJSON = false;\n    if (options.hasOwnProperty(\"useGeoJSON\")) {\n      useGeoJSON = options.useGeoJSON;\n    }\n    delete options.useGeoJSON;\n    options = extend_object({\n      map: this.map\n    }, options);\n    if (useGeoJSON == false) {\n      options.paths = [options.paths.slice(0)];\n    }\n    if (options.paths.length > 0) {\n      if (options.paths[0].length > 0) {\n        options.paths = array_flat(array_map(options.paths, arrayToLatLng, useGeoJSON));\n      }\n    }\n    var polygon = new google.maps.Polygon(options),\n      polygon_events = ['click', 'dblclick', 'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'rightclick'];\n    for (var ev = 0; ev < polygon_events.length; ev++) {\n      (function (object, name) {\n        if (options[name]) {\n          google.maps.event.addListener(object, name, function (e) {\n            options[name].apply(this, [e]);\n          });\n        }\n      })(polygon, polygon_events[ev]);\n    }\n    this.polygons.push(polygon);\n    GMaps.fire('polygon_added', polygon, this);\n    return polygon;\n  };\n  GMaps.prototype.removePolygon = function (polygon) {\n    for (var i = 0; i < this.polygons.length; i++) {\n      if (this.polygons[i] === polygon) {\n        this.polygons[i].setMap(null);\n        this.polygons.splice(i, 1);\n        GMaps.fire('polygon_removed', polygon, this);\n        break;\n      }\n    }\n  };\n  GMaps.prototype.removePolygons = function () {\n    for (var i = 0, item; item = this.polygons[i]; i++) {\n      item.setMap(null);\n    }\n    this.polygons = [];\n  };\n  GMaps.prototype.getFromFusionTables = function (options) {\n    var events = options.events;\n    delete options.events;\n    var fusion_tables_options = options,\n      layer = new google.maps.FusionTablesLayer(fusion_tables_options);\n    for (var ev in events) {\n      (function (object, name) {\n        google.maps.event.addListener(object, name, function (e) {\n          events[name].apply(this, [e]);\n        });\n      })(layer, ev);\n    }\n    this.layers.push(layer);\n    return layer;\n  };\n  GMaps.prototype.loadFromFusionTables = function (options) {\n    var layer = this.getFromFusionTables(options);\n    layer.setMap(this.map);\n    return layer;\n  };\n  GMaps.prototype.getFromKML = function (options) {\n    var url = options.url,\n      events = options.events;\n    delete options.url;\n    delete options.events;\n    var kml_options = options,\n      layer = new google.maps.KmlLayer(url, kml_options);\n    for (var ev in events) {\n      (function (object, name) {\n        google.maps.event.addListener(object, name, function (e) {\n          events[name].apply(this, [e]);\n        });\n      })(layer, ev);\n    }\n    this.layers.push(layer);\n    return layer;\n  };\n  GMaps.prototype.loadFromKML = function (options) {\n    var layer = this.getFromKML(options);\n    layer.setMap(this.map);\n    return layer;\n  };\n  GMaps.prototype.addLayer = function (layerName, options) {\n    //var default_layers = ['weather', 'clouds', 'traffic', 'transit', 'bicycling', 'panoramio', 'places'];\n    options = options || {};\n    var layer;\n    switch (layerName) {\n      case 'weather':\n        this.singleLayers.weather = layer = new google.maps.weather.WeatherLayer();\n        break;\n      case 'clouds':\n        this.singleLayers.clouds = layer = new google.maps.weather.CloudLayer();\n        break;\n      case 'traffic':\n        this.singleLayers.traffic = layer = new google.maps.TrafficLayer();\n        break;\n      case 'transit':\n        this.singleLayers.transit = layer = new google.maps.TransitLayer();\n        break;\n      case 'bicycling':\n        this.singleLayers.bicycling = layer = new google.maps.BicyclingLayer();\n        break;\n      case 'panoramio':\n        this.singleLayers.panoramio = layer = new google.maps.panoramio.PanoramioLayer();\n        layer.setTag(options.filter);\n        delete options.filter;\n\n        //click event\n        if (options.click) {\n          google.maps.event.addListener(layer, 'click', function (event) {\n            options.click(event);\n            delete options.click;\n          });\n        }\n        break;\n      case 'places':\n        this.singleLayers.places = layer = new google.maps.places.PlacesService(this.map);\n\n        //search, nearbySearch, radarSearch callback, Both are the same\n        if (options.search || options.nearbySearch || options.radarSearch) {\n          var placeSearchRequest = {\n            bounds: options.bounds || null,\n            keyword: options.keyword || null,\n            location: options.location || null,\n            name: options.name || null,\n            radius: options.radius || null,\n            rankBy: options.rankBy || null,\n            types: options.types || null\n          };\n          if (options.radarSearch) {\n            layer.radarSearch(placeSearchRequest, options.radarSearch);\n          }\n          if (options.search) {\n            layer.search(placeSearchRequest, options.search);\n          }\n          if (options.nearbySearch) {\n            layer.nearbySearch(placeSearchRequest, options.nearbySearch);\n          }\n        }\n\n        //textSearch callback\n        if (options.textSearch) {\n          var textSearchRequest = {\n            bounds: options.bounds || null,\n            location: options.location || null,\n            query: options.query || null,\n            radius: options.radius || null\n          };\n          layer.textSearch(textSearchRequest, options.textSearch);\n        }\n        break;\n    }\n    if (layer !== undefined) {\n      if (typeof layer.setOptions == 'function') {\n        layer.setOptions(options);\n      }\n      if (typeof layer.setMap == 'function') {\n        layer.setMap(this.map);\n      }\n      return layer;\n    }\n  };\n  GMaps.prototype.removeLayer = function (layer) {\n    if (typeof layer == \"string\" && this.singleLayers[layer] !== undefined) {\n      this.singleLayers[layer].setMap(null);\n      delete this.singleLayers[layer];\n    } else {\n      for (var i = 0; i < this.layers.length; i++) {\n        if (this.layers[i] === layer) {\n          this.layers[i].setMap(null);\n          this.layers.splice(i, 1);\n          break;\n        }\n      }\n    }\n  };\n  var travelMode, unitSystem;\n  GMaps.prototype.getRoutes = function (options) {\n    switch (options.travelMode) {\n      case 'bicycling':\n        travelMode = google.maps.TravelMode.BICYCLING;\n        break;\n      case 'transit':\n        travelMode = google.maps.TravelMode.TRANSIT;\n        break;\n      case 'driving':\n        travelMode = google.maps.TravelMode.DRIVING;\n        break;\n      default:\n        travelMode = google.maps.TravelMode.WALKING;\n        break;\n    }\n    if (options.unitSystem === 'imperial') {\n      unitSystem = google.maps.UnitSystem.IMPERIAL;\n    } else {\n      unitSystem = google.maps.UnitSystem.METRIC;\n    }\n    var base_options = {\n        avoidHighways: false,\n        avoidTolls: false,\n        optimizeWaypoints: false,\n        waypoints: []\n      },\n      request_options = extend_object(base_options, options);\n    request_options.origin = /string/.test(typeof options.origin) ? options.origin : new google.maps.LatLng(options.origin[0], options.origin[1]);\n    request_options.destination = /string/.test(typeof options.destination) ? options.destination : new google.maps.LatLng(options.destination[0], options.destination[1]);\n    request_options.travelMode = travelMode;\n    request_options.unitSystem = unitSystem;\n    delete request_options.callback;\n    delete request_options.error;\n    var self = this,\n      routes = [],\n      service = new google.maps.DirectionsService();\n    service.route(request_options, function (result, status) {\n      if (status === google.maps.DirectionsStatus.OK) {\n        for (var r in result.routes) {\n          if (result.routes.hasOwnProperty(r)) {\n            routes.push(result.routes[r]);\n          }\n        }\n        if (options.callback) {\n          options.callback(routes, result, status);\n        }\n      } else {\n        if (options.error) {\n          options.error(result, status);\n        }\n      }\n    });\n  };\n  GMaps.prototype.removeRoutes = function () {\n    this.routes.length = 0;\n  };\n  GMaps.prototype.getElevations = function (options) {\n    options = extend_object({\n      locations: [],\n      path: false,\n      samples: 256\n    }, options);\n    if (options.locations.length > 0) {\n      if (options.locations[0].length > 0) {\n        options.locations = array_flat(array_map([options.locations], arrayToLatLng, false));\n      }\n    }\n    var callback = options.callback;\n    delete options.callback;\n    var service = new google.maps.ElevationService();\n\n    //location request\n    if (!options.path) {\n      delete options.path;\n      delete options.samples;\n      service.getElevationForLocations(options, function (result, status) {\n        if (callback && typeof callback === \"function\") {\n          callback(result, status);\n        }\n      });\n      //path request\n    } else {\n      var pathRequest = {\n        path: options.locations,\n        samples: options.samples\n      };\n      service.getElevationAlongPath(pathRequest, function (result, status) {\n        if (callback && typeof callback === \"function\") {\n          callback(result, status);\n        }\n      });\n    }\n  };\n  GMaps.prototype.cleanRoute = GMaps.prototype.removePolylines;\n  GMaps.prototype.renderRoute = function (options, renderOptions) {\n    var self = this,\n      panel = typeof renderOptions.panel === 'string' ? document.getElementById(renderOptions.panel.replace('#', '')) : renderOptions.panel,\n      display;\n    renderOptions.panel = panel;\n    renderOptions = extend_object({\n      map: this.map\n    }, renderOptions);\n    display = new google.maps.DirectionsRenderer(renderOptions);\n    this.getRoutes({\n      origin: options.origin,\n      destination: options.destination,\n      travelMode: options.travelMode,\n      waypoints: options.waypoints,\n      unitSystem: options.unitSystem,\n      error: options.error,\n      avoidHighways: options.avoidHighways,\n      avoidTolls: options.avoidTolls,\n      optimizeWaypoints: options.optimizeWaypoints,\n      callback: function (routes, response, status) {\n        if (status === google.maps.DirectionsStatus.OK) {\n          display.setDirections(response);\n        }\n      }\n    });\n  };\n  GMaps.prototype.drawRoute = function (options) {\n    var self = this;\n    this.getRoutes({\n      origin: options.origin,\n      destination: options.destination,\n      travelMode: options.travelMode,\n      waypoints: options.waypoints,\n      unitSystem: options.unitSystem,\n      error: options.error,\n      avoidHighways: options.avoidHighways,\n      avoidTolls: options.avoidTolls,\n      optimizeWaypoints: options.optimizeWaypoints,\n      callback: function (routes) {\n        if (routes.length > 0) {\n          var polyline_options = {\n            path: routes[routes.length - 1].overview_path,\n            strokeColor: options.strokeColor,\n            strokeOpacity: options.strokeOpacity,\n            strokeWeight: options.strokeWeight\n          };\n          if (options.hasOwnProperty(\"icons\")) {\n            polyline_options.icons = options.icons;\n          }\n          self.drawPolyline(polyline_options);\n          if (options.callback) {\n            options.callback(routes[routes.length - 1]);\n          }\n        }\n      }\n    });\n  };\n  GMaps.prototype.travelRoute = function (options) {\n    if (options.origin && options.destination) {\n      this.getRoutes({\n        origin: options.origin,\n        destination: options.destination,\n        travelMode: options.travelMode,\n        waypoints: options.waypoints,\n        unitSystem: options.unitSystem,\n        error: options.error,\n        callback: function (e) {\n          //start callback\n          if (e.length > 0 && options.start) {\n            options.start(e[e.length - 1]);\n          }\n\n          //step callback\n          if (e.length > 0 && options.step) {\n            var route = e[e.length - 1];\n            if (route.legs.length > 0) {\n              var steps = route.legs[0].steps;\n              for (var i = 0, step; step = steps[i]; i++) {\n                step.step_number = i;\n                options.step(step, route.legs[0].steps.length - 1);\n              }\n            }\n          }\n\n          //end callback\n          if (e.length > 0 && options.end) {\n            options.end(e[e.length - 1]);\n          }\n        }\n      });\n    } else if (options.route) {\n      if (options.route.legs.length > 0) {\n        var steps = options.route.legs[0].steps;\n        for (var i = 0, step; step = steps[i]; i++) {\n          step.step_number = i;\n          options.step(step);\n        }\n      }\n    }\n  };\n  GMaps.prototype.drawSteppedRoute = function (options) {\n    var self = this;\n    if (options.origin && options.destination) {\n      this.getRoutes({\n        origin: options.origin,\n        destination: options.destination,\n        travelMode: options.travelMode,\n        waypoints: options.waypoints,\n        error: options.error,\n        callback: function (e) {\n          //start callback\n          if (e.length > 0 && options.start) {\n            options.start(e[e.length - 1]);\n          }\n\n          //step callback\n          if (e.length > 0 && options.step) {\n            var route = e[e.length - 1];\n            if (route.legs.length > 0) {\n              var steps = route.legs[0].steps;\n              for (var i = 0, step; step = steps[i]; i++) {\n                step.step_number = i;\n                var polyline_options = {\n                  path: step.path,\n                  strokeColor: options.strokeColor,\n                  strokeOpacity: options.strokeOpacity,\n                  strokeWeight: options.strokeWeight\n                };\n                if (options.hasOwnProperty(\"icons\")) {\n                  polyline_options.icons = options.icons;\n                }\n                self.drawPolyline(polyline_options);\n                options.step(step, route.legs[0].steps.length - 1);\n              }\n            }\n          }\n\n          //end callback\n          if (e.length > 0 && options.end) {\n            options.end(e[e.length - 1]);\n          }\n        }\n      });\n    } else if (options.route) {\n      if (options.route.legs.length > 0) {\n        var steps = options.route.legs[0].steps;\n        for (var i = 0, step; step = steps[i]; i++) {\n          step.step_number = i;\n          var polyline_options = {\n            path: step.path,\n            strokeColor: options.strokeColor,\n            strokeOpacity: options.strokeOpacity,\n            strokeWeight: options.strokeWeight\n          };\n          if (options.hasOwnProperty(\"icons\")) {\n            polyline_options.icons = options.icons;\n          }\n          self.drawPolyline(polyline_options);\n          options.step(step);\n        }\n      }\n    }\n  };\n  GMaps.Route = function (options) {\n    this.origin = options.origin;\n    this.destination = options.destination;\n    this.waypoints = options.waypoints;\n    this.map = options.map;\n    this.route = options.route;\n    this.step_count = 0;\n    this.steps = this.route.legs[0].steps;\n    this.steps_length = this.steps.length;\n    var polyline_options = {\n      path: new google.maps.MVCArray(),\n      strokeColor: options.strokeColor,\n      strokeOpacity: options.strokeOpacity,\n      strokeWeight: options.strokeWeight\n    };\n    if (options.hasOwnProperty(\"icons\")) {\n      polyline_options.icons = options.icons;\n    }\n    this.polyline = this.map.drawPolyline(polyline_options).getPath();\n  };\n  GMaps.Route.prototype.getRoute = function (options) {\n    var self = this;\n    this.map.getRoutes({\n      origin: this.origin,\n      destination: this.destination,\n      travelMode: options.travelMode,\n      waypoints: this.waypoints || [],\n      error: options.error,\n      callback: function () {\n        self.route = e[0];\n        if (options.callback) {\n          options.callback.call(self);\n        }\n      }\n    });\n  };\n  GMaps.Route.prototype.back = function () {\n    if (this.step_count > 0) {\n      this.step_count--;\n      var path = this.route.legs[0].steps[this.step_count].path;\n      for (var p in path) {\n        if (path.hasOwnProperty(p)) {\n          this.polyline.pop();\n        }\n      }\n    }\n  };\n  GMaps.Route.prototype.forward = function () {\n    if (this.step_count < this.steps_length) {\n      var path = this.route.legs[0].steps[this.step_count].path;\n      for (var p in path) {\n        if (path.hasOwnProperty(p)) {\n          this.polyline.push(path[p]);\n        }\n      }\n      this.step_count++;\n    }\n  };\n  GMaps.prototype.checkGeofence = function (lat, lng, fence) {\n    return fence.containsLatLng(new google.maps.LatLng(lat, lng));\n  };\n  GMaps.prototype.checkMarkerGeofence = function (marker, outside_callback) {\n    if (marker.fences) {\n      for (var i = 0, fence; fence = marker.fences[i]; i++) {\n        var pos = marker.getPosition();\n        if (!this.checkGeofence(pos.lat(), pos.lng(), fence)) {\n          outside_callback(marker, fence);\n        }\n      }\n    }\n  };\n  GMaps.prototype.toImage = function (options) {\n    var options = options || {},\n      static_map_options = {};\n    static_map_options['size'] = options['size'] || [this.el.clientWidth, this.el.clientHeight];\n    static_map_options['lat'] = this.getCenter().lat();\n    static_map_options['lng'] = this.getCenter().lng();\n    if (this.markers.length > 0) {\n      static_map_options['markers'] = [];\n      for (var i = 0; i < this.markers.length; i++) {\n        static_map_options['markers'].push({\n          lat: this.markers[i].getPosition().lat(),\n          lng: this.markers[i].getPosition().lng()\n        });\n      }\n    }\n    if (this.polylines.length > 0) {\n      var polyline = this.polylines[0];\n      static_map_options['polyline'] = {};\n      static_map_options['polyline']['path'] = google.maps.geometry.encoding.encodePath(polyline.getPath());\n      static_map_options['polyline']['strokeColor'] = polyline.strokeColor;\n      static_map_options['polyline']['strokeOpacity'] = polyline.strokeOpacity;\n      static_map_options['polyline']['strokeWeight'] = polyline.strokeWeight;\n    }\n    return GMaps.staticMapURL(static_map_options);\n  };\n  GMaps.staticMapURL = function (options) {\n    var parameters = [],\n      data,\n      static_root = (location.protocol === 'file:' ? 'http:' : location.protocol) + '//maps.googleapis.com/maps/api/staticmap';\n    if (options.url) {\n      static_root = options.url;\n      delete options.url;\n    }\n    static_root += '?';\n    var markers = options.markers;\n    delete options.markers;\n    if (!markers && options.marker) {\n      markers = [options.marker];\n      delete options.marker;\n    }\n    var styles = options.styles;\n    delete options.styles;\n    var polyline = options.polyline;\n    delete options.polyline;\n\n    /** Map options **/\n    if (options.center) {\n      parameters.push('center=' + options.center);\n      delete options.center;\n    } else if (options.address) {\n      parameters.push('center=' + options.address);\n      delete options.address;\n    } else if (options.lat) {\n      parameters.push(['center=', options.lat, ',', options.lng].join(''));\n      delete options.lat;\n      delete options.lng;\n    } else if (options.visible) {\n      var visible = encodeURI(options.visible.join('|'));\n      parameters.push('visible=' + visible);\n    }\n    var size = options.size;\n    if (size) {\n      if (size.join) {\n        size = size.join('x');\n      }\n      delete options.size;\n    } else {\n      size = '630x300';\n    }\n    parameters.push('size=' + size);\n    if (!options.zoom && options.zoom !== false) {\n      options.zoom = 15;\n    }\n    var sensor = options.hasOwnProperty('sensor') ? !!options.sensor : true;\n    delete options.sensor;\n    parameters.push('sensor=' + sensor);\n    for (var param in options) {\n      if (options.hasOwnProperty(param)) {\n        parameters.push(param + '=' + options[param]);\n      }\n    }\n\n    /** Markers **/\n    if (markers) {\n      var marker, loc;\n      for (var i = 0; data = markers[i]; i++) {\n        marker = [];\n        if (data.size && data.size !== 'normal') {\n          marker.push('size:' + data.size);\n          delete data.size;\n        } else if (data.icon) {\n          marker.push('icon:' + encodeURI(data.icon));\n          delete data.icon;\n        }\n        if (data.color) {\n          marker.push('color:' + data.color.replace('#', '0x'));\n          delete data.color;\n        }\n        if (data.label) {\n          marker.push('label:' + data.label[0].toUpperCase());\n          delete data.label;\n        }\n        loc = data.address ? data.address : data.lat + ',' + data.lng;\n        delete data.address;\n        delete data.lat;\n        delete data.lng;\n        for (var param in data) {\n          if (data.hasOwnProperty(param)) {\n            marker.push(param + ':' + data[param]);\n          }\n        }\n        if (marker.length || i === 0) {\n          marker.push(loc);\n          marker = marker.join('|');\n          parameters.push('markers=' + encodeURI(marker));\n        }\n        // New marker without styles\n        else {\n          marker = parameters.pop() + encodeURI('|' + loc);\n          parameters.push(marker);\n        }\n      }\n    }\n\n    /** Map Styles **/\n    if (styles) {\n      for (var i = 0; i < styles.length; i++) {\n        var styleRule = [];\n        if (styles[i].featureType) {\n          styleRule.push('feature:' + styles[i].featureType.toLowerCase());\n        }\n        if (styles[i].elementType) {\n          styleRule.push('element:' + styles[i].elementType.toLowerCase());\n        }\n        for (var j = 0; j < styles[i].stylers.length; j++) {\n          for (var p in styles[i].stylers[j]) {\n            var ruleArg = styles[i].stylers[j][p];\n            if (p == 'hue' || p == 'color') {\n              ruleArg = '0x' + ruleArg.substring(1);\n            }\n            styleRule.push(p + ':' + ruleArg);\n          }\n        }\n        var rule = styleRule.join('|');\n        if (rule != '') {\n          parameters.push('style=' + rule);\n        }\n      }\n    }\n\n    /** Polylines **/\n    function parseColor(color, opacity) {\n      if (color[0] === '#') {\n        color = color.replace('#', '0x');\n        if (opacity) {\n          opacity = parseFloat(opacity);\n          opacity = Math.min(1, Math.max(opacity, 0));\n          if (opacity === 0) {\n            return '0x00000000';\n          }\n          opacity = (opacity * 255).toString(16);\n          if (opacity.length === 1) {\n            opacity += opacity;\n          }\n          color = color.slice(0, 8) + opacity;\n        }\n      }\n      return color;\n    }\n    if (polyline) {\n      data = polyline;\n      polyline = [];\n      if (data.strokeWeight) {\n        polyline.push('weight:' + parseInt(data.strokeWeight, 10));\n      }\n      if (data.strokeColor) {\n        var color = parseColor(data.strokeColor, data.strokeOpacity);\n        polyline.push('color:' + color);\n      }\n      if (data.fillColor) {\n        var fillcolor = parseColor(data.fillColor, data.fillOpacity);\n        polyline.push('fillcolor:' + fillcolor);\n      }\n      var path = data.path;\n      if (path.join) {\n        for (var j = 0, pos; pos = path[j]; j++) {\n          polyline.push(pos.join(','));\n        }\n      } else {\n        polyline.push('enc:' + path);\n      }\n      polyline = polyline.join('|');\n      parameters.push('path=' + encodeURI(polyline));\n    }\n\n    /** Retina support **/\n    var dpi = window.devicePixelRatio || 1;\n    parameters.push('scale=' + dpi);\n    parameters = parameters.join('&');\n    return static_root + parameters;\n  };\n  GMaps.prototype.addMapType = function (mapTypeId, options) {\n    if (options.hasOwnProperty(\"getTileUrl\") && typeof options[\"getTileUrl\"] == \"function\") {\n      options.tileSize = options.tileSize || new google.maps.Size(256, 256);\n      var mapType = new google.maps.ImageMapType(options);\n      this.map.mapTypes.set(mapTypeId, mapType);\n    } else {\n      throw \"'getTileUrl' function required.\";\n    }\n  };\n  GMaps.prototype.addOverlayMapType = function (options) {\n    if (options.hasOwnProperty(\"getTile\") && typeof options[\"getTile\"] == \"function\") {\n      var overlayMapTypeIndex = options.index;\n      delete options.index;\n      this.map.overlayMapTypes.insertAt(overlayMapTypeIndex, options);\n    } else {\n      throw \"'getTile' function required.\";\n    }\n  };\n  GMaps.prototype.removeOverlayMapType = function (overlayMapTypeIndex) {\n    this.map.overlayMapTypes.removeAt(overlayMapTypeIndex);\n  };\n  GMaps.prototype.addStyle = function (options) {\n    var styledMapType = new google.maps.StyledMapType(options.styles, {\n      name: options.styledMapName\n    });\n    this.map.mapTypes.set(options.mapTypeId, styledMapType);\n  };\n  GMaps.prototype.setStyle = function (mapTypeId) {\n    this.map.setMapTypeId(mapTypeId);\n  };\n  GMaps.prototype.createPanorama = function (streetview_options) {\n    if (!streetview_options.hasOwnProperty('lat') || !streetview_options.hasOwnProperty('lng')) {\n      streetview_options.lat = this.getCenter().lat();\n      streetview_options.lng = this.getCenter().lng();\n    }\n    this.panorama = GMaps.createPanorama(streetview_options);\n    this.map.setStreetView(this.panorama);\n    return this.panorama;\n  };\n  GMaps.createPanorama = function (options) {\n    var el = getElementById(options.el, options.context);\n    options.position = new google.maps.LatLng(options.lat, options.lng);\n    delete options.el;\n    delete options.context;\n    delete options.lat;\n    delete options.lng;\n    var streetview_events = ['closeclick', 'links_changed', 'pano_changed', 'position_changed', 'pov_changed', 'resize', 'visible_changed'],\n      streetview_options = extend_object({\n        visible: true\n      }, options);\n    for (var i = 0; i < streetview_events.length; i++) {\n      delete streetview_options[streetview_events[i]];\n    }\n    var panorama = new google.maps.StreetViewPanorama(el, streetview_options);\n    for (var i = 0; i < streetview_events.length; i++) {\n      (function (object, name) {\n        if (options[name]) {\n          google.maps.event.addListener(object, name, function () {\n            options[name].apply(this);\n          });\n        }\n      })(panorama, streetview_events[i]);\n    }\n    return panorama;\n  };\n  GMaps.prototype.on = function (event_name, handler) {\n    return GMaps.on(event_name, this, handler);\n  };\n  GMaps.prototype.off = function (event_name) {\n    GMaps.off(event_name, this);\n  };\n  GMaps.prototype.once = function (event_name, handler) {\n    return GMaps.once(event_name, this, handler);\n  };\n  GMaps.custom_events = ['marker_added', 'marker_removed', 'polyline_added', 'polyline_removed', 'polygon_added', 'polygon_removed', 'geolocated', 'geolocation_failed'];\n  GMaps.on = function (event_name, object, handler) {\n    if (GMaps.custom_events.indexOf(event_name) == -1) {\n      if (object instanceof GMaps) object = object.map;\n      return google.maps.event.addListener(object, event_name, handler);\n    } else {\n      var registered_event = {\n        handler: handler,\n        eventName: event_name\n      };\n      object.registered_events[event_name] = object.registered_events[event_name] || [];\n      object.registered_events[event_name].push(registered_event);\n      return registered_event;\n    }\n  };\n  GMaps.off = function (event_name, object) {\n    if (GMaps.custom_events.indexOf(event_name) == -1) {\n      if (object instanceof GMaps) object = object.map;\n      google.maps.event.clearListeners(object, event_name);\n    } else {\n      object.registered_events[event_name] = [];\n    }\n  };\n  GMaps.once = function (event_name, object, handler) {\n    if (GMaps.custom_events.indexOf(event_name) == -1) {\n      if (object instanceof GMaps) object = object.map;\n      return google.maps.event.addListenerOnce(object, event_name, handler);\n    }\n  };\n  GMaps.fire = function (event_name, object, scope) {\n    if (GMaps.custom_events.indexOf(event_name) == -1) {\n      google.maps.event.trigger(object, event_name, Array.prototype.slice.apply(arguments).slice(2));\n    } else {\n      if (event_name in scope.registered_events) {\n        var firing_events = scope.registered_events[event_name];\n        for (var i = 0; i < firing_events.length; i++) {\n          (function (handler, scope, object) {\n            handler.apply(scope, [object]);\n          })(firing_events[i]['handler'], scope, object);\n        }\n      }\n    }\n  };\n  GMaps.geolocate = function (options) {\n    var complete_callback = options.always || options.complete;\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(function (position) {\n        options.success(position);\n        if (complete_callback) {\n          complete_callback();\n        }\n      }, function (error) {\n        options.error(error);\n        if (complete_callback) {\n          complete_callback();\n        }\n      }, options.options);\n    } else {\n      options.not_supported();\n      if (complete_callback) {\n        complete_callback();\n      }\n    }\n  };\n  GMaps.geocode = function (options) {\n    this.geocoder = new google.maps.Geocoder();\n    var callback = options.callback;\n    if (options.hasOwnProperty('lat') && options.hasOwnProperty('lng')) {\n      options.latLng = new google.maps.LatLng(options.lat, options.lng);\n    }\n    delete options.lat;\n    delete options.lng;\n    delete options.callback;\n    this.geocoder.geocode(options, function (results, status) {\n      callback(results, status);\n    });\n  };\n  if (typeof window.google === 'object' && window.google.maps) {\n    //==========================\n    // Polygon containsLatLng\n    // https://github.com/tparkin/Google-Maps-Point-in-Polygon\n    // Poygon getBounds extension - google-maps-extensions\n    // http://code.google.com/p/google-maps-extensions/source/browse/google.maps.Polygon.getBounds.js\n    if (!google.maps.Polygon.prototype.getBounds) {\n      google.maps.Polygon.prototype.getBounds = function (latLng) {\n        var bounds = new google.maps.LatLngBounds();\n        var paths = this.getPaths();\n        var path;\n        for (var p = 0; p < paths.getLength(); p++) {\n          path = paths.getAt(p);\n          for (var i = 0; i < path.getLength(); i++) {\n            bounds.extend(path.getAt(i));\n          }\n        }\n        return bounds;\n      };\n    }\n    if (!google.maps.Polygon.prototype.containsLatLng) {\n      // Polygon containsLatLng - method to determine if a latLng is within a polygon\n      google.maps.Polygon.prototype.containsLatLng = function (latLng) {\n        // Exclude points outside of bounds as there is no way they are in the poly\n        var bounds = this.getBounds();\n        if (bounds !== null && !bounds.contains(latLng)) {\n          return false;\n        }\n\n        // Raycast point in polygon method\n        var inPoly = false;\n        var numPaths = this.getPaths().getLength();\n        for (var p = 0; p < numPaths; p++) {\n          var path = this.getPaths().getAt(p);\n          var numPoints = path.getLength();\n          var j = numPoints - 1;\n          for (var i = 0; i < numPoints; i++) {\n            var vertex1 = path.getAt(i);\n            var vertex2 = path.getAt(j);\n            if (vertex1.lng() < latLng.lng() && vertex2.lng() >= latLng.lng() || vertex2.lng() < latLng.lng() && vertex1.lng() >= latLng.lng()) {\n              if (vertex1.lat() + (latLng.lng() - vertex1.lng()) / (vertex2.lng() - vertex1.lng()) * (vertex2.lat() - vertex1.lat()) < latLng.lat()) {\n                inPoly = !inPoly;\n              }\n            }\n            j = i;\n          }\n        }\n        return inPoly;\n      };\n    }\n    if (!google.maps.Circle.prototype.containsLatLng) {\n      google.maps.Circle.prototype.containsLatLng = function (latLng) {\n        if (google.maps.geometry) {\n          return google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(), latLng) <= this.getRadius();\n        } else {\n          return true;\n        }\n      };\n    }\n    google.maps.Rectangle.prototype.containsLatLng = function (latLng) {\n      return this.getBounds().contains(latLng);\n    };\n    google.maps.LatLngBounds.prototype.containsLatLng = function (latLng) {\n      return this.contains(latLng);\n    };\n    google.maps.Marker.prototype.setFences = function (fences) {\n      this.fences = fences;\n    };\n    google.maps.Marker.prototype.addFence = function (fence) {\n      this.fences.push(fence);\n    };\n    google.maps.Marker.prototype.getId = function () {\n      return this['__gm_id'];\n    };\n  }\n\n  //==========================\n  // Array indexOf\n  // https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf\n  if (!Array.prototype.indexOf) {\n    Array.prototype.indexOf = function (searchElement /*, fromIndex */) {\n      \"use strict\";\n\n      if (this == null) {\n        throw new TypeError();\n      }\n      var t = Object(this);\n      var len = t.length >>> 0;\n      if (len === 0) {\n        return -1;\n      }\n      var n = 0;\n      if (arguments.length > 1) {\n        n = Number(arguments[1]);\n        if (n != n) {\n          // shortcut for verifying if it's NaN\n          n = 0;\n        } else if (n != 0 && n != Infinity && n != -Infinity) {\n          n = (n > 0 || -1) * Math.floor(Math.abs(n));\n        }\n      }\n      if (n >= len) {\n        return -1;\n      }\n      var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n      for (; k < len; k++) {\n        if (k in t && t[k] === searchElement) {\n          return k;\n        }\n      }\n      return -1;\n    };\n  }\n  return GMaps;\n});","map":{"version":3,"names":["root","factory","exports","module","define","amd","GMaps","extend_object","obj","new_obj","name","undefined","replace_object","replace","array_map","array","callback","original_callback_params","Array","prototype","slice","call","arguments","array_return","array_length","length","i","map","item","callback_params","splice","apply","push","array_flat","new_array","concat","coordsToLatLngs","coords","useGeoJSON","first_coord","second_coord","google","maps","LatLng","arrayToLatLng","getElementsByClassName","class_name","context","element","_class","$","document","getElementById","id","window","findAbsolutePosition","curleft","curtop","getBoundingClientRect","rect","sx","scrollX","pageXOffset","sy","scrollY","pageYOffset","left","top","offsetParent","offsetLeft","offsetTop","global","doc","options","console","error","zoom","mapType","valueOrDefault","value","defaultValue","self","events_that_hide_context_menu","events_that_doesnt_hide_context_menu","options_to_be_deleted","identifier","el","div","markerClustererFunction","markerClusterer","MapTypeId","toUpperCase","map_center","lat","lng","zoomControl","zoomControlOpt","style","position","zoomControlStyle","zoomControlPosition","panControl","mapTypeControl","scaleControl","streetViewControl","overviewMapControl","map_options","map_base_options","center","mapTypeId","map_controls_options","zoomControlOptions","ZoomControlStyle","ControlPosition","indexOf","context_menu","controls","overlays","layers","singleLayers","markers","polylines","routes","polygons","infoWindow","overlay_el","registered_events","width","scrollWidth","offsetWidth","height","scrollHeight","offsetHeight","visualRefresh","enableNewStyle","disableDefaultUI","Map","buildContextMenuHTML","control","e","html","hasOwnProperty","option","title","context_menu_element","innerHTML","context_menu_items","getElementsByTagName","context_menu_items_count","context_menu_item","assign_menu_item_action","ev","preventDefault","action","hideContextMenu","event","clearListeners","addDomListenerOnce","pixel","x","y","buildContextMenu","overlay","OverlayView","setMap","draw","projection","getProjection","marker","getPosition","fromLatLngToContainerPixel","setTimeout","display","setContextMenu","ul","createElement","minWidth","background","listStyle","padding","boxShadow","body","appendChild","addDomListener","relatedTarget","contains","setupListener","object","addListener","rightclick","refresh","trigger","fitZoom","latLngs","markers_length","visible","fitLatLngBounds","total","bounds","LatLngBounds","extend","fitBounds","setCenter","panTo","getElement","zoomIn","getZoom","setZoom","zoomOut","native_methods","method","gmaps","scope","method_name","createControl","cursor","disableDefaultStyles","fontFamily","fontSize","classes","className","content","HTMLElement","events","index","addControl","removeControl","controlsForPosition","getAt","removeAt","createMarker","details","fences","outside","base_options","marker_options","Marker","InfoWindow","info_window_events","marker_events","marker_events_with_mouse","me","fromLatLngToPoint","latLng","click","hideInfoWindows","open","checkMarkerGeofence","m","f","addMarker","fire","addMarkers","close","removeMarker","removeMarkers","collection","new_markers","clearMarkers","getMap","drawOverlay","auto_show","onAdd","borderStyle","borderWidth","zIndex","layer","panes","getPanes","overlayLayer","stop_overlay_events","navigator","userAgent","toLowerCase","all","cancelBubble","returnValue","stopPropagation","overlayMouseTarget","fromLatLngToDivPixel","horizontalOffset","verticalOffset","children","content_height","clientHeight","content_width","clientWidth","verticalAlign","horizontalAlign","show","onRemove","remove","parentNode","removeChild","removeOverlay","removeOverlays","drawPolyline","path","points","latlng","polyline_options","strokeColor","strokeOpacity","strokeWeight","geodesic","clickable","editable","icons","polyline","Polyline","polyline_events","removePolyline","removePolylines","drawCircle","polygon","Circle","polygon_events","drawRectangle","latLngBounds","Rectangle","drawPolygon","paths","Polygon","removePolygon","removePolygons","getFromFusionTables","fusion_tables_options","FusionTablesLayer","loadFromFusionTables","getFromKML","url","kml_options","KmlLayer","loadFromKML","addLayer","layerName","weather","WeatherLayer","clouds","CloudLayer","traffic","TrafficLayer","transit","TransitLayer","bicycling","BicyclingLayer","panoramio","PanoramioLayer","setTag","filter","places","PlacesService","search","nearbySearch","radarSearch","placeSearchRequest","keyword","location","radius","rankBy","types","textSearch","textSearchRequest","query","setOptions","removeLayer","travelMode","unitSystem","getRoutes","TravelMode","BICYCLING","TRANSIT","DRIVING","WALKING","UnitSystem","IMPERIAL","METRIC","avoidHighways","avoidTolls","optimizeWaypoints","waypoints","request_options","origin","test","destination","service","DirectionsService","route","result","status","DirectionsStatus","OK","r","removeRoutes","getElevations","locations","samples","ElevationService","getElevationForLocations","pathRequest","getElevationAlongPath","cleanRoute","renderRoute","renderOptions","panel","DirectionsRenderer","response","setDirections","drawRoute","overview_path","travelRoute","start","step","legs","steps","step_number","end","drawSteppedRoute","Route","step_count","steps_length","MVCArray","getPath","getRoute","back","p","pop","forward","checkGeofence","fence","containsLatLng","outside_callback","pos","toImage","static_map_options","getCenter","geometry","encoding","encodePath","staticMapURL","parameters","data","static_root","protocol","styles","address","join","encodeURI","size","sensor","param","loc","icon","color","label","styleRule","featureType","elementType","j","stylers","ruleArg","substring","rule","parseColor","opacity","parseFloat","Math","min","max","toString","parseInt","fillColor","fillcolor","fillOpacity","dpi","devicePixelRatio","addMapType","tileSize","Size","ImageMapType","mapTypes","set","addOverlayMapType","overlayMapTypeIndex","overlayMapTypes","insertAt","removeOverlayMapType","addStyle","styledMapType","StyledMapType","styledMapName","setStyle","setMapTypeId","createPanorama","streetview_options","panorama","setStreetView","streetview_events","StreetViewPanorama","on","event_name","handler","off","once","custom_events","registered_event","eventName","addListenerOnce","firing_events","geolocate","complete_callback","always","complete","geolocation","getCurrentPosition","success","not_supported","geocode","geocoder","Geocoder","results","getBounds","getPaths","getLength","inPoly","numPaths","numPoints","vertex1","vertex2","spherical","computeDistanceBetween","getRadius","setFences","addFence","getId","searchElement","TypeError","t","Object","len","n","Number","Infinity","floor","abs","k"],"sources":["C:/Users/megha/OneDrive/Documents/GitHub/Gmapsclone/frontend/node_modules/gmaps/gmaps.js"],"sourcesContent":["\"use strict\";\n(function(root, factory) {\n  if(typeof exports === 'object') {\n    module.exports = factory();\n  }\n  else if(typeof define === 'function' && define.amd) {\n    define(['jquery', 'googlemaps!'], factory);\n  }\n  else {\n    root.GMaps = factory();\n  }\n\n\n}(this, function() {\n\n/*!\n * GMaps.js v0.4.25\n * http://hpneo.github.com/gmaps/\n *\n * Copyright 2017, Gustavo Leon\n * Released under the MIT License.\n */\n\nvar extend_object = function(obj, new_obj) {\n  var name;\n\n  if (obj === new_obj) {\n    return obj;\n  }\n\n  for (name in new_obj) {\n    if (new_obj[name] !== undefined) {\n      obj[name] = new_obj[name];\n    }\n  }\n\n  return obj;\n};\n\nvar replace_object = function(obj, replace) {\n  var name;\n\n  if (obj === replace) {\n    return obj;\n  }\n\n  for (name in replace) {\n    if (obj[name] != undefined) {\n      obj[name] = replace[name];\n    }\n  }\n\n  return obj;\n};\n\nvar array_map = function(array, callback) {\n  var original_callback_params = Array.prototype.slice.call(arguments, 2),\n      array_return = [],\n      array_length = array.length,\n      i;\n\n  if (Array.prototype.map && array.map === Array.prototype.map) {\n    array_return = Array.prototype.map.call(array, function(item) {\n      var callback_params = original_callback_params.slice(0);\n      callback_params.splice(0, 0, item);\n\n      return callback.apply(this, callback_params);\n    });\n  }\n  else {\n    for (i = 0; i < array_length; i++) {\n      callback_params = original_callback_params;\n      callback_params.splice(0, 0, array[i]);\n      array_return.push(callback.apply(this, callback_params));\n    }\n  }\n\n  return array_return;\n};\n\nvar array_flat = function(array) {\n  var new_array = [],\n      i;\n\n  for (i = 0; i < array.length; i++) {\n    new_array = new_array.concat(array[i]);\n  }\n\n  return new_array;\n};\n\nvar coordsToLatLngs = function(coords, useGeoJSON) {\n  var first_coord = coords[0],\n      second_coord = coords[1];\n\n  if (useGeoJSON) {\n    first_coord = coords[1];\n    second_coord = coords[0];\n  }\n\n  return new google.maps.LatLng(first_coord, second_coord);\n};\n\nvar arrayToLatLng = function(coords, useGeoJSON) {\n  var i;\n\n  for (i = 0; i < coords.length; i++) {\n    if (!(coords[i] instanceof google.maps.LatLng)) {\n      if (coords[i].length > 0 && typeof(coords[i][0]) === \"object\") {\n        coords[i] = arrayToLatLng(coords[i], useGeoJSON);\n      }\n      else {\n        coords[i] = coordsToLatLngs(coords[i], useGeoJSON);\n      }\n    }\n  }\n\n  return coords;\n};\n\nvar getElementsByClassName = function (class_name, context) {\n    var element,\n        _class = class_name.replace('.', '');\n\n    if ('jQuery' in this && context) {\n        element = $(\".\" + _class, context)[0];\n    } else {\n        element = document.getElementsByClassName(_class)[0];\n    }\n    return element;\n\n};\n\nvar getElementById = function(id, context) {\n  var element,\n  id = id.replace('#', '');\n\n  if ('jQuery' in window && context) {\n    element = $('#' + id, context)[0];\n  } else {\n    element = document.getElementById(id);\n  };\n\n  return element;\n};\n\nvar findAbsolutePosition = function(obj)  {\n  var curleft = 0,\n      curtop = 0;\n\n  if (obj.getBoundingClientRect) {\n      var rect = obj.getBoundingClientRect();\n      var sx = -(window.scrollX ? window.scrollX : window.pageXOffset);\n      var sy = -(window.scrollY ? window.scrollY : window.pageYOffset);\n\n      return [(rect.left - sx), (rect.top - sy)];\n  }\n\n  if (obj.offsetParent) {\n    do {\n      curleft += obj.offsetLeft;\n      curtop += obj.offsetTop;\n    } while (obj = obj.offsetParent);\n  }\n\n  return [curleft, curtop];\n};\n\nvar GMaps = (function(global) {\n  \"use strict\";\n\n  var doc = document;\n  /**\n   * Creates a new GMaps instance, including a Google Maps map.\n   * @class GMaps\n   * @constructs\n   * @param {object} options - `options` accepts all the [MapOptions](https://developers.google.com/maps/documentation/javascript/reference#MapOptions) and [events](https://developers.google.com/maps/documentation/javascript/reference#Map) listed in the Google Maps API. Also accepts:\n   * * `lat` (number): Latitude of the map's center\n   * * `lng` (number): Longitude of the map's center\n   * * `el` (string or HTMLElement): container where the map will be rendered\n   * * `markerClusterer` (function): A function to create a marker cluster. You can use MarkerClusterer or MarkerClustererPlus.\n   */\n  var GMaps = function(options) {\n\n    if (!(typeof window.google === 'object' && window.google.maps)) {\n      if (typeof window.console === 'object' && window.console.error) {\n        console.error('Google Maps API is required. Please register the following JavaScript library https://maps.googleapis.com/maps/api/js.');\n      }\n\n      return function() {};\n    }\n\n    if (!this) return new GMaps(options);\n\n    options.zoom = options.zoom || 15;\n    options.mapType = options.mapType || 'roadmap';\n\n    var valueOrDefault = function(value, defaultValue) {\n      return value === undefined ? defaultValue : value;\n    };\n\n    var self = this,\n        i,\n        events_that_hide_context_menu = [\n          'bounds_changed', 'center_changed', 'click', 'dblclick', 'drag',\n          'dragend', 'dragstart', 'idle', 'maptypeid_changed', 'projection_changed',\n          'resize', 'tilesloaded', 'zoom_changed'\n        ],\n        events_that_doesnt_hide_context_menu = ['mousemove', 'mouseout', 'mouseover'],\n        options_to_be_deleted = ['el', 'lat', 'lng', 'mapType', 'width', 'height', 'markerClusterer', 'enableNewStyle'],\n        identifier = options.el || options.div,\n        markerClustererFunction = options.markerClusterer,\n        mapType = google.maps.MapTypeId[options.mapType.toUpperCase()],\n        map_center = new google.maps.LatLng(options.lat, options.lng),\n        zoomControl = valueOrDefault(options.zoomControl, true),\n        zoomControlOpt = options.zoomControlOpt || {\n          style: 'DEFAULT',\n          position: 'TOP_LEFT'\n        },\n        zoomControlStyle = zoomControlOpt.style || 'DEFAULT',\n        zoomControlPosition = zoomControlOpt.position || 'TOP_LEFT',\n        panControl = valueOrDefault(options.panControl, true),\n        mapTypeControl = valueOrDefault(options.mapTypeControl, true),\n        scaleControl = valueOrDefault(options.scaleControl, true),\n        streetViewControl = valueOrDefault(options.streetViewControl, true),\n        overviewMapControl = valueOrDefault(overviewMapControl, true),\n        map_options = {},\n        map_base_options = {\n          zoom: this.zoom,\n          center: map_center,\n          mapTypeId: mapType\n        },\n        map_controls_options = {\n          panControl: panControl,\n          zoomControl: zoomControl,\n          zoomControlOptions: {\n            style: google.maps.ZoomControlStyle[zoomControlStyle],\n            position: google.maps.ControlPosition[zoomControlPosition]\n          },\n          mapTypeControl: mapTypeControl,\n          scaleControl: scaleControl,\n          streetViewControl: streetViewControl,\n          overviewMapControl: overviewMapControl\n        };\n\n      if (typeof(options.el) === 'string' || typeof(options.div) === 'string') {\n        if (identifier.indexOf(\"#\") > -1) {\n            /**\n             * Container element\n             *\n             * @type {HTMLElement}\n             */\n            this.el = getElementById(identifier, options.context);\n        } else {\n            this.el = getElementsByClassName.apply(this, [identifier, options.context]);\n        }\n      } else {\n          this.el = identifier;\n      }\n\n    if (typeof(this.el) === 'undefined' || this.el === null) {\n      throw 'No element defined.';\n    }\n\n    window.context_menu = window.context_menu || {};\n    window.context_menu[self.el.id] = {};\n\n    /**\n     * Collection of custom controls in the map UI\n     *\n     * @type {array}\n     */\n    this.controls = [];\n    /**\n     * Collection of map's overlays\n     *\n     * @type {array}\n     */\n    this.overlays = [];\n    /**\n     * Collection of KML/GeoRSS and FusionTable layers\n     *\n     * @type {array}\n     */\n    this.layers = [];\n    /**\n     * Collection of data layers (See {@link GMaps#addLayer})\n     *\n     * @type {object}\n     */\n    this.singleLayers = {};\n    /**\n     * Collection of map's markers\n     *\n     * @type {array}\n     */\n    this.markers = [];\n    /**\n     * Collection of map's lines\n     *\n     * @type {array}\n     */\n    this.polylines = [];\n    /**\n     * Collection of map's routes requested by {@link GMaps#getRoutes}, {@link GMaps#renderRoute}, {@link GMaps#drawRoute}, {@link GMaps#travelRoute} or {@link GMaps#drawSteppedRoute}\n     *\n     * @type {array}\n     */\n    this.routes = [];\n    /**\n     * Collection of map's polygons\n     *\n     * @type {array}\n     */\n    this.polygons = [];\n    this.infoWindow = null;\n    this.overlay_el = null;\n    /**\n     * Current map's zoom\n     *\n     * @type {number}\n     */\n    this.zoom = options.zoom;\n    this.registered_events = {};\n\n    this.el.style.width = options.width || this.el.scrollWidth || this.el.offsetWidth;\n    this.el.style.height = options.height || this.el.scrollHeight || this.el.offsetHeight;\n\n    google.maps.visualRefresh = options.enableNewStyle;\n\n    for (i = 0; i < options_to_be_deleted.length; i++) {\n      delete options[options_to_be_deleted[i]];\n    }\n\n    if(options.disableDefaultUI != true) {\n      map_base_options = extend_object(map_base_options, map_controls_options);\n    }\n\n    map_options = extend_object(map_base_options, options);\n\n    for (i = 0; i < events_that_hide_context_menu.length; i++) {\n      delete map_options[events_that_hide_context_menu[i]];\n    }\n\n    for (i = 0; i < events_that_doesnt_hide_context_menu.length; i++) {\n      delete map_options[events_that_doesnt_hide_context_menu[i]];\n    }\n\n    /**\n     * Google Maps map instance\n     *\n     * @type {google.maps.Map}\n     */\n    this.map = new google.maps.Map(this.el, map_options);\n\n    if (markerClustererFunction) {\n      /**\n       * Marker Clusterer instance\n       *\n       * @type {object}\n       */\n      this.markerClusterer = markerClustererFunction.apply(this, [this.map]);\n    }\n\n    var buildContextMenuHTML = function(control, e) {\n      var html = '',\n          options = window.context_menu[self.el.id][control];\n\n      for (var i in options){\n        if (options.hasOwnProperty(i)) {\n          var option = options[i];\n\n          html += '<li><a id=\"' + control + '_' + i + '\" href=\"#\">' + option.title + '</a></li>';\n        }\n      }\n\n      if (!getElementById('gmaps_context_menu')) return;\n\n      var context_menu_element = getElementById('gmaps_context_menu');\n\n      context_menu_element.innerHTML = html;\n\n      var context_menu_items = context_menu_element.getElementsByTagName('a'),\n          context_menu_items_count = context_menu_items.length,\n          i;\n\n      for (i = 0; i < context_menu_items_count; i++) {\n        var context_menu_item = context_menu_items[i];\n\n        var assign_menu_item_action = function(ev){\n          ev.preventDefault();\n\n          options[this.id.replace(control + '_', '')].action.apply(self, [e]);\n          self.hideContextMenu();\n        };\n\n        google.maps.event.clearListeners(context_menu_item, 'click');\n        google.maps.event.addDomListenerOnce(context_menu_item, 'click', assign_menu_item_action, false);\n      }\n\n      var position = findAbsolutePosition.apply(this, [self.el]),\n          left = position[0] + e.pixel.x - 15,\n          top = position[1] + e.pixel.y- 15;\n\n      context_menu_element.style.left = left + \"px\";\n      context_menu_element.style.top = top + \"px\";\n\n      // context_menu_element.style.display = 'block';\n    };\n\n    this.buildContextMenu = function(control, e) {\n      if (control === 'marker') {\n        e.pixel = {};\n\n        var overlay = new google.maps.OverlayView();\n        overlay.setMap(self.map);\n\n        overlay.draw = function() {\n          var projection = overlay.getProjection(),\n              position = e.marker.getPosition();\n\n          e.pixel = projection.fromLatLngToContainerPixel(position);\n\n          buildContextMenuHTML(control, e);\n        };\n      }\n      else {\n        buildContextMenuHTML(control, e);\n      }\n\n      var context_menu_element = getElementById('gmaps_context_menu');\n\n      setTimeout(function() {\n        context_menu_element.style.display = 'block';\n      }, 0);\n    };\n\n    /**\n     * Add a context menu for a map or a marker.\n     *\n     * @param {object} options - The `options` object should contain:\n     * * `control` (string): Kind of control the context menu will be attached. Can be \"map\" or \"marker\".\n     * * `options` (array): A collection of context menu items:\n     *   * `title` (string): Item's title shown in the context menu.\n     *   * `name` (string): Item's identifier.\n     *   * `action` (function): Function triggered after selecting the context menu item.\n     */\n    this.setContextMenu = function(options) {\n      window.context_menu[self.el.id][options.control] = {};\n\n      var i,\n          ul = doc.createElement('ul');\n\n      for (i in options.options) {\n        if (options.options.hasOwnProperty(i)) {\n          var option = options.options[i];\n\n          window.context_menu[self.el.id][options.control][option.name] = {\n            title: option.title,\n            action: option.action\n          };\n        }\n      }\n\n      ul.id = 'gmaps_context_menu';\n      ul.style.display = 'none';\n      ul.style.position = 'absolute';\n      ul.style.minWidth = '100px';\n      ul.style.background = 'white';\n      ul.style.listStyle = 'none';\n      ul.style.padding = '8px';\n      ul.style.boxShadow = '2px 2px 6px #ccc';\n\n      if (!getElementById('gmaps_context_menu')) {\n        doc.body.appendChild(ul);\n      }\n\n      var context_menu_element = getElementById('gmaps_context_menu');\n\n      google.maps.event.addDomListener(context_menu_element, 'mouseout', function(ev) {\n        if (!ev.relatedTarget || !this.contains(ev.relatedTarget)) {\n          window.setTimeout(function(){\n            context_menu_element.style.display = 'none';\n          }, 400);\n        }\n      }, false);\n    };\n\n    /**\n     * Hide the current context menu\n     */\n    this.hideContextMenu = function() {\n      var context_menu_element = getElementById('gmaps_context_menu');\n\n      if (context_menu_element) {\n        context_menu_element.style.display = 'none';\n      }\n    };\n\n    var setupListener = function(object, name) {\n      google.maps.event.addListener(object, name, function(e){\n        if (e == undefined) {\n          e = this;\n        }\n\n        options[name].apply(this, [e]);\n\n        self.hideContextMenu();\n      });\n    };\n\n    //google.maps.event.addListener(this.map, 'idle', this.hideContextMenu);\n    google.maps.event.addListener(this.map, 'zoom_changed', this.hideContextMenu);\n\n    for (var ev = 0; ev < events_that_hide_context_menu.length; ev++) {\n      var name = events_that_hide_context_menu[ev];\n\n      if (name in options) {\n        setupListener(this.map, name);\n      }\n    }\n\n    for (var ev = 0; ev < events_that_doesnt_hide_context_menu.length; ev++) {\n      var name = events_that_doesnt_hide_context_menu[ev];\n\n      if (name in options) {\n        setupListener(this.map, name);\n      }\n    }\n\n    google.maps.event.addListener(this.map, 'rightclick', function(e) {\n      if (options.rightclick) {\n        options.rightclick.apply(this, [e]);\n      }\n\n      if(window.context_menu[self.el.id]['map'] != undefined) {\n        self.buildContextMenu('map', e);\n      }\n    });\n\n    /**\n     * Trigger a `resize` event, useful if you need to repaint the current map (for changes in the viewport or display / hide actions).\n     */\n    this.refresh = function() {\n      google.maps.event.trigger(this.map, 'resize');\n    };\n\n    /**\n     * Adjust the map zoom to include all the markers added in the map.\n     */\n    this.fitZoom = function() {\n      var latLngs = [],\n          markers_length = this.markers.length,\n          i;\n\n      for (i = 0; i < markers_length; i++) {\n        if(typeof(this.markers[i].visible) === 'boolean' && this.markers[i].visible) {\n          latLngs.push(this.markers[i].getPosition());\n        }\n      }\n\n      this.fitLatLngBounds(latLngs);\n    };\n\n    /**\n     * Adjust the map zoom to include all the coordinates in the `latLngs` array.\n     *\n     * @param {array} latLngs - Collection of `google.maps.LatLng` objects.\n     */\n    this.fitLatLngBounds = function(latLngs) {\n      var total = latLngs.length,\n          bounds = new google.maps.LatLngBounds(),\n          i;\n\n      for(i = 0; i < total; i++) {\n        bounds.extend(latLngs[i]);\n      }\n\n      this.map.fitBounds(bounds);\n    };\n\n    /**\n     * Center the map using the `lat` and `lng` coordinates.\n     *\n     * @param {number} lat - Latitude of the coordinate.\n     * @param {number} lng - Longitude of the coordinate.\n     * @param {function} [callback] - Callback that will be executed after the map is centered.\n     */\n    this.setCenter = function(lat, lng, callback) {\n      this.map.panTo(new google.maps.LatLng(lat, lng));\n\n      if (callback) {\n        callback();\n      }\n    };\n\n    /**\n     * Return the HTML element container of the map.\n     *\n     * @returns {HTMLElement} the element container.\n     */\n    this.getElement = function() {\n      return this.el;\n    };\n\n    /**\n     * Increase the map's zoom.\n     *\n     * @param {number} [magnitude] - The number of times the map will be zoomed in.\n     */\n    this.zoomIn = function(value) {\n      value = value || 1;\n\n      this.zoom = this.map.getZoom() + value;\n      this.map.setZoom(this.zoom);\n    };\n\n    /**\n     * Decrease the map's zoom.\n     *\n     * @param {number} [magnitude] - The number of times the map will be zoomed out.\n     */\n    this.zoomOut = function(value) {\n      value = value || 1;\n\n      this.zoom = this.map.getZoom() - value;\n      this.map.setZoom(this.zoom);\n    };\n\n    var native_methods = [],\n        method;\n\n    for (method in this.map) {\n      if (typeof(this.map[method]) == 'function' && !this[method]) {\n        native_methods.push(method);\n      }\n    }\n\n    for (i = 0; i < native_methods.length; i++) {\n      (function(gmaps, scope, method_name) {\n        gmaps[method_name] = function(){\n          return scope[method_name].apply(scope, arguments);\n        };\n      })(this, this.map, native_methods[i]);\n    }\n  };\n\n  return GMaps;\n})(this);\n\nGMaps.prototype.createControl = function(options) {\n  var control = document.createElement('div');\n\n  control.style.cursor = 'pointer';\n\n  if (options.disableDefaultStyles !== true) {\n    control.style.fontFamily = 'Roboto, Arial, sans-serif';\n    control.style.fontSize = '11px';\n    control.style.boxShadow = 'rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px';\n  }\n\n  for (var option in options.style) {\n    control.style[option] = options.style[option];\n  }\n\n  if (options.id) {\n    control.id = options.id;\n  }\n\n  if (options.title) {\n    control.title = options.title;\n  }\n\n  if (options.classes) {\n    control.className = options.classes;\n  }\n\n  if (options.content) {\n    if (typeof options.content === 'string') {\n      control.innerHTML = options.content;\n    }\n    else if (options.content instanceof HTMLElement) {\n      control.appendChild(options.content);\n    }\n  }\n\n  if (options.position) {\n    control.position = google.maps.ControlPosition[options.position.toUpperCase()];\n  }\n\n  for (var ev in options.events) {\n    (function(object, name) {\n      google.maps.event.addDomListener(object, name, function(){\n        options.events[name].apply(this, [this]);\n      });\n    })(control, ev);\n  }\n\n  control.index = 1;\n\n  return control;\n};\n\n/**\n * Add a custom control to the map UI.\n *\n * @param {object} options - The `options` object should contain:\n * * `style` (object): The keys and values of this object should be valid CSS properties and values.\n * * `id` (string): The HTML id for the custom control.\n * * `classes` (string): A string containing all the HTML classes for the custom control.\n * * `content` (string or HTML element): The content of the custom control.\n * * `position` (string): Any valid [`google.maps.ControlPosition`](https://developers.google.com/maps/documentation/javascript/controls#ControlPositioning) value, in lower or upper case.\n * * `events` (object): The keys of this object should be valid DOM events. The values should be functions.\n * * `disableDefaultStyles` (boolean): If false, removes the default styles for the controls like font (family and size), and box shadow.\n * @returns {HTMLElement}\n */\nGMaps.prototype.addControl = function(options) {\n  var control = this.createControl(options);\n\n  this.controls.push(control);\n  this.map.controls[control.position].push(control);\n\n  return control;\n};\n\n/**\n * Remove a control from the map. `control` should be a control returned by `addControl()`.\n *\n * @param {HTMLElement} control - One of the controls returned by `addControl()`.\n * @returns {HTMLElement} the removed control.\n */\nGMaps.prototype.removeControl = function(control) {\n  var position = null,\n      i;\n\n  for (i = 0; i < this.controls.length; i++) {\n    if (this.controls[i] == control) {\n      position = this.controls[i].position;\n      this.controls.splice(i, 1);\n    }\n  }\n\n  if (position) {\n    for (i = 0; i < this.map.controls.length; i++) {\n      var controlsForPosition = this.map.controls[control.position];\n\n      if (controlsForPosition.getAt(i) == control) {\n        controlsForPosition.removeAt(i);\n\n        break;\n      }\n    }\n  }\n\n  return control;\n};\n\nGMaps.prototype.createMarker = function(options) {\n  if (options.lat == undefined && options.lng == undefined && options.position == undefined) {\n    throw 'No latitude or longitude defined.';\n  }\n\n  var self = this,\n      details = options.details,\n      fences = options.fences,\n      outside = options.outside,\n      base_options = {\n        position: new google.maps.LatLng(options.lat, options.lng),\n        map: null\n      },\n      marker_options = extend_object(base_options, options);\n\n  delete marker_options.lat;\n  delete marker_options.lng;\n  delete marker_options.fences;\n  delete marker_options.outside;\n\n  var marker = new google.maps.Marker(marker_options);\n\n  marker.fences = fences;\n\n  if (options.infoWindow) {\n    marker.infoWindow = new google.maps.InfoWindow(options.infoWindow);\n\n    var info_window_events = ['closeclick', 'content_changed', 'domready', 'position_changed', 'zindex_changed'];\n\n    for (var ev = 0; ev < info_window_events.length; ev++) {\n      (function(object, name) {\n        if (options.infoWindow[name]) {\n          google.maps.event.addListener(object, name, function(e){\n            options.infoWindow[name].apply(this, [e]);\n          });\n        }\n      })(marker.infoWindow, info_window_events[ev]);\n    }\n  }\n\n  var marker_events = ['animation_changed', 'clickable_changed', 'cursor_changed', 'draggable_changed', 'flat_changed', 'icon_changed', 'position_changed', 'shadow_changed', 'shape_changed', 'title_changed', 'visible_changed', 'zindex_changed'];\n\n  var marker_events_with_mouse = ['dblclick', 'drag', 'dragend', 'dragstart', 'mousedown', 'mouseout', 'mouseover', 'mouseup'];\n\n  for (var ev = 0; ev < marker_events.length; ev++) {\n    (function(object, name) {\n      if (options[name]) {\n        google.maps.event.addListener(object, name, function(){\n          options[name].apply(this, [this]);\n        });\n      }\n    })(marker, marker_events[ev]);\n  }\n\n  for (var ev = 0; ev < marker_events_with_mouse.length; ev++) {\n    (function(map, object, name) {\n      if (options[name]) {\n        google.maps.event.addListener(object, name, function(me){\n          if(!me.pixel){\n            me.pixel = map.getProjection().fromLatLngToPoint(me.latLng)\n          }\n\n          options[name].apply(this, [me]);\n        });\n      }\n    })(this.map, marker, marker_events_with_mouse[ev]);\n  }\n\n  google.maps.event.addListener(marker, 'click', function() {\n    this.details = details;\n\n    if (options.click) {\n      options.click.apply(this, [this]);\n    }\n\n    if (marker.infoWindow) {\n      self.hideInfoWindows();\n      marker.infoWindow.open(self.map, marker);\n    }\n  });\n\n  google.maps.event.addListener(marker, 'rightclick', function(e) {\n    e.marker = this;\n\n    if (options.rightclick) {\n      options.rightclick.apply(this, [e]);\n    }\n\n    if (window.context_menu[self.el.id]['marker'] != undefined) {\n      self.buildContextMenu('marker', e);\n    }\n  });\n\n  if (marker.fences) {\n    google.maps.event.addListener(marker, 'dragend', function() {\n      self.checkMarkerGeofence(marker, function(m, f) {\n        outside(m, f);\n      });\n    });\n  }\n\n  return marker;\n};\n\nGMaps.prototype.addMarker = function(options) {\n  var marker;\n  if(options.hasOwnProperty('gm_accessors_')) {\n    // Native google.maps.Marker object\n    marker = options;\n  }\n  else {\n    if ((options.hasOwnProperty('lat') && options.hasOwnProperty('lng')) || options.position) {\n      marker = this.createMarker(options);\n    }\n    else {\n      throw 'No latitude or longitude defined.';\n    }\n  }\n\n  marker.setMap(this.map);\n\n  if(this.markerClusterer) {\n    this.markerClusterer.addMarker(marker);\n  }\n\n  this.markers.push(marker);\n\n  GMaps.fire('marker_added', marker, this);\n\n  return marker;\n};\n\nGMaps.prototype.addMarkers = function(array) {\n  for (var i = 0, marker; marker=array[i]; i++) {\n    this.addMarker(marker);\n  }\n\n  return this.markers;\n};\n\nGMaps.prototype.hideInfoWindows = function() {\n  for (var i = 0, marker; marker = this.markers[i]; i++){\n    if (marker.infoWindow) {\n      marker.infoWindow.close();\n    }\n  }\n};\n\nGMaps.prototype.removeMarker = function(marker) {\n  for (var i = 0; i < this.markers.length; i++) {\n    if (this.markers[i] === marker) {\n      this.markers[i].setMap(null);\n      this.markers.splice(i, 1);\n\n      if(this.markerClusterer) {\n        this.markerClusterer.removeMarker(marker);\n      }\n\n      GMaps.fire('marker_removed', marker, this);\n\n      break;\n    }\n  }\n\n  return marker;\n};\n\nGMaps.prototype.removeMarkers = function (collection) {\n  var new_markers = [];\n\n  if (typeof collection == 'undefined') {\n    for (var i = 0; i < this.markers.length; i++) {\n      var marker = this.markers[i];\n      marker.setMap(null);\n\n      GMaps.fire('marker_removed', marker, this);\n    }\n\n    if(this.markerClusterer && this.markerClusterer.clearMarkers) {\n      this.markerClusterer.clearMarkers();\n    }\n\n    this.markers = new_markers;\n  }\n  else {\n    for (var i = 0; i < collection.length; i++) {\n      var index = this.markers.indexOf(collection[i]);\n\n      if (index > -1) {\n        var marker = this.markers[index];\n        marker.setMap(null);\n\n        if(this.markerClusterer) {\n          this.markerClusterer.removeMarker(marker);\n        }\n\n        GMaps.fire('marker_removed', marker, this);\n      }\n    }\n\n    for (var i = 0; i < this.markers.length; i++) {\n      var marker = this.markers[i];\n      if (marker.getMap() != null) {\n        new_markers.push(marker);\n      }\n    }\n\n    this.markers = new_markers;\n  }\n};\n\nGMaps.prototype.drawOverlay = function(options) {\n  var overlay = new google.maps.OverlayView(),\n      auto_show = true;\n\n  overlay.setMap(this.map);\n\n  if (options.auto_show != null) {\n    auto_show = options.auto_show;\n  }\n\n  overlay.onAdd = function() {\n    var el = document.createElement('div');\n\n    el.style.borderStyle = \"none\";\n    el.style.borderWidth = \"0px\";\n    el.style.position = \"absolute\";\n    el.style.zIndex = 100;\n    el.innerHTML = options.content;\n\n    overlay.el = el;\n\n    if (!options.layer) {\n      options.layer = 'overlayLayer';\n    }\n    \n    var panes = this.getPanes(),\n        overlayLayer = panes[options.layer],\n        stop_overlay_events = ['contextmenu', 'DOMMouseScroll', 'dblclick', 'mousedown'];\n\n    overlayLayer.appendChild(el);\n\n    for (var ev = 0; ev < stop_overlay_events.length; ev++) {\n      (function(object, name) {\n        google.maps.event.addDomListener(object, name, function(e){\n          if (navigator.userAgent.toLowerCase().indexOf('msie') != -1 && document.all) {\n            e.cancelBubble = true;\n            e.returnValue = false;\n          }\n          else {\n            e.stopPropagation();\n          }\n        });\n      })(el, stop_overlay_events[ev]);\n    }\n\n    if (options.click) {\n      panes.overlayMouseTarget.appendChild(overlay.el);\n      google.maps.event.addDomListener(overlay.el, 'click', function() {\n        options.click.apply(overlay, [overlay]);\n      });\n    }\n\n    google.maps.event.trigger(this, 'ready');\n  };\n\n  overlay.draw = function() {\n    var projection = this.getProjection(),\n        pixel = projection.fromLatLngToDivPixel(new google.maps.LatLng(options.lat, options.lng));\n\n    options.horizontalOffset = options.horizontalOffset || 0;\n    options.verticalOffset = options.verticalOffset || 0;\n\n    var el = overlay.el,\n        content = el.children[0],\n        content_height = content.clientHeight,\n        content_width = content.clientWidth;\n\n    switch (options.verticalAlign) {\n      case 'top':\n        el.style.top = (pixel.y - content_height + options.verticalOffset) + 'px';\n        break;\n      default:\n      case 'middle':\n        el.style.top = (pixel.y - (content_height / 2) + options.verticalOffset) + 'px';\n        break;\n      case 'bottom':\n        el.style.top = (pixel.y + options.verticalOffset) + 'px';\n        break;\n    }\n\n    switch (options.horizontalAlign) {\n      case 'left':\n        el.style.left = (pixel.x - content_width + options.horizontalOffset) + 'px';\n        break;\n      default:\n      case 'center':\n        el.style.left = (pixel.x - (content_width / 2) + options.horizontalOffset) + 'px';\n        break;\n      case 'right':\n        el.style.left = (pixel.x + options.horizontalOffset) + 'px';\n        break;\n    }\n\n    el.style.display = auto_show ? 'block' : 'none';\n\n    if (!auto_show) {\n      options.show.apply(this, [el]);\n    }\n  };\n\n  overlay.onRemove = function() {\n    var el = overlay.el;\n\n    if (options.remove) {\n      options.remove.apply(this, [el]);\n    }\n    else {\n      overlay.el.parentNode.removeChild(overlay.el);\n      overlay.el = null;\n    }\n  };\n\n  this.overlays.push(overlay);\n  return overlay;\n};\n\nGMaps.prototype.removeOverlay = function(overlay) {\n  for (var i = 0; i < this.overlays.length; i++) {\n    if (this.overlays[i] === overlay) {\n      this.overlays[i].setMap(null);\n      this.overlays.splice(i, 1);\n\n      break;\n    }\n  }\n};\n\nGMaps.prototype.removeOverlays = function() {\n  for (var i = 0, item; item = this.overlays[i]; i++) {\n    item.setMap(null);\n  }\n\n  this.overlays = [];\n};\n\nGMaps.prototype.drawPolyline = function(options) {\n  var path = [],\n      points = options.path;\n\n  if (points.length) {\n    if (points[0][0] === undefined) {\n      path = points;\n    }\n    else {\n      for (var i = 0, latlng; latlng = points[i]; i++) {\n        path.push(new google.maps.LatLng(latlng[0], latlng[1]));\n      }\n    }\n  }\n\n  var polyline_options = {\n    map: this.map,\n    path: path,\n    strokeColor: options.strokeColor,\n    strokeOpacity: options.strokeOpacity,\n    strokeWeight: options.strokeWeight,\n    geodesic: options.geodesic,\n    clickable: true,\n    editable: false,\n    visible: true\n  };\n\n  if (options.hasOwnProperty(\"clickable\")) {\n    polyline_options.clickable = options.clickable;\n  }\n\n  if (options.hasOwnProperty(\"editable\")) {\n    polyline_options.editable = options.editable;\n  }\n\n  if (options.hasOwnProperty(\"icons\")) {\n    polyline_options.icons = options.icons;\n  }\n\n  if (options.hasOwnProperty(\"zIndex\")) {\n    polyline_options.zIndex = options.zIndex;\n  }\n\n  var polyline = new google.maps.Polyline(polyline_options);\n\n  var polyline_events = ['click', 'dblclick', 'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'rightclick'];\n\n  for (var ev = 0; ev < polyline_events.length; ev++) {\n    (function(object, name) {\n      if (options[name]) {\n        google.maps.event.addListener(object, name, function(e){\n          options[name].apply(this, [e]);\n        });\n      }\n    })(polyline, polyline_events[ev]);\n  }\n\n  this.polylines.push(polyline);\n\n  GMaps.fire('polyline_added', polyline, this);\n\n  return polyline;\n};\n\nGMaps.prototype.removePolyline = function(polyline) {\n  for (var i = 0; i < this.polylines.length; i++) {\n    if (this.polylines[i] === polyline) {\n      this.polylines[i].setMap(null);\n      this.polylines.splice(i, 1);\n\n      GMaps.fire('polyline_removed', polyline, this);\n\n      break;\n    }\n  }\n};\n\nGMaps.prototype.removePolylines = function() {\n  for (var i = 0, item; item = this.polylines[i]; i++) {\n    item.setMap(null);\n  }\n\n  this.polylines = [];\n};\n\nGMaps.prototype.drawCircle = function(options) {\n  options =  extend_object({\n    map: this.map,\n    center: new google.maps.LatLng(options.lat, options.lng)\n  }, options);\n\n  delete options.lat;\n  delete options.lng;\n\n  var polygon = new google.maps.Circle(options),\n      polygon_events = ['click', 'dblclick', 'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'rightclick'];\n\n  for (var ev = 0; ev < polygon_events.length; ev++) {\n    (function(object, name) {\n      if (options[name]) {\n        google.maps.event.addListener(object, name, function(e){\n          options[name].apply(this, [e]);\n        });\n      }\n    })(polygon, polygon_events[ev]);\n  }\n\n  this.polygons.push(polygon);\n\n  return polygon;\n};\n\nGMaps.prototype.drawRectangle = function(options) {\n  options = extend_object({\n    map: this.map\n  }, options);\n\n  var latLngBounds = new google.maps.LatLngBounds(\n    new google.maps.LatLng(options.bounds[0][0], options.bounds[0][1]),\n    new google.maps.LatLng(options.bounds[1][0], options.bounds[1][1])\n  );\n\n  options.bounds = latLngBounds;\n\n  var polygon = new google.maps.Rectangle(options),\n      polygon_events = ['click', 'dblclick', 'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'rightclick'];\n\n  for (var ev = 0; ev < polygon_events.length; ev++) {\n    (function(object, name) {\n      if (options[name]) {\n        google.maps.event.addListener(object, name, function(e){\n          options[name].apply(this, [e]);\n        });\n      }\n    })(polygon, polygon_events[ev]);\n  }\n\n  this.polygons.push(polygon);\n\n  return polygon;\n};\n\nGMaps.prototype.drawPolygon = function(options) {\n  var useGeoJSON = false;\n\n  if(options.hasOwnProperty(\"useGeoJSON\")) {\n    useGeoJSON = options.useGeoJSON;\n  }\n\n  delete options.useGeoJSON;\n\n  options = extend_object({\n    map: this.map\n  }, options);\n\n  if (useGeoJSON == false) {\n    options.paths = [options.paths.slice(0)];\n  }\n\n  if (options.paths.length > 0) {\n    if (options.paths[0].length > 0) {\n      options.paths = array_flat(array_map(options.paths, arrayToLatLng, useGeoJSON));\n    }\n  }\n\n  var polygon = new google.maps.Polygon(options),\n      polygon_events = ['click', 'dblclick', 'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'rightclick'];\n\n  for (var ev = 0; ev < polygon_events.length; ev++) {\n    (function(object, name) {\n      if (options[name]) {\n        google.maps.event.addListener(object, name, function(e){\n          options[name].apply(this, [e]);\n        });\n      }\n    })(polygon, polygon_events[ev]);\n  }\n\n  this.polygons.push(polygon);\n\n  GMaps.fire('polygon_added', polygon, this);\n\n  return polygon;\n};\n\nGMaps.prototype.removePolygon = function(polygon) {\n  for (var i = 0; i < this.polygons.length; i++) {\n    if (this.polygons[i] === polygon) {\n      this.polygons[i].setMap(null);\n      this.polygons.splice(i, 1);\n\n      GMaps.fire('polygon_removed', polygon, this);\n\n      break;\n    }\n  }\n};\n\nGMaps.prototype.removePolygons = function() {\n  for (var i = 0, item; item = this.polygons[i]; i++) {\n    item.setMap(null);\n  }\n\n  this.polygons = [];\n};\n\nGMaps.prototype.getFromFusionTables = function(options) {\n  var events = options.events;\n\n  delete options.events;\n\n  var fusion_tables_options = options,\n      layer = new google.maps.FusionTablesLayer(fusion_tables_options);\n\n  for (var ev in events) {\n    (function(object, name) {\n      google.maps.event.addListener(object, name, function(e) {\n        events[name].apply(this, [e]);\n      });\n    })(layer, ev);\n  }\n\n  this.layers.push(layer);\n\n  return layer;\n};\n\nGMaps.prototype.loadFromFusionTables = function(options) {\n  var layer = this.getFromFusionTables(options);\n  layer.setMap(this.map);\n\n  return layer;\n};\n\nGMaps.prototype.getFromKML = function(options) {\n  var url = options.url,\n      events = options.events;\n\n  delete options.url;\n  delete options.events;\n\n  var kml_options = options,\n      layer = new google.maps.KmlLayer(url, kml_options);\n\n  for (var ev in events) {\n    (function(object, name) {\n      google.maps.event.addListener(object, name, function(e) {\n        events[name].apply(this, [e]);\n      });\n    })(layer, ev);\n  }\n\n  this.layers.push(layer);\n\n  return layer;\n};\n\nGMaps.prototype.loadFromKML = function(options) {\n  var layer = this.getFromKML(options);\n  layer.setMap(this.map);\n\n  return layer;\n};\n\nGMaps.prototype.addLayer = function(layerName, options) {\n  //var default_layers = ['weather', 'clouds', 'traffic', 'transit', 'bicycling', 'panoramio', 'places'];\n  options = options || {};\n  var layer;\n\n  switch(layerName) {\n    case 'weather': this.singleLayers.weather = layer = new google.maps.weather.WeatherLayer();\n      break;\n    case 'clouds': this.singleLayers.clouds = layer = new google.maps.weather.CloudLayer();\n      break;\n    case 'traffic': this.singleLayers.traffic = layer = new google.maps.TrafficLayer();\n      break;\n    case 'transit': this.singleLayers.transit = layer = new google.maps.TransitLayer();\n      break;\n    case 'bicycling': this.singleLayers.bicycling = layer = new google.maps.BicyclingLayer();\n      break;\n    case 'panoramio':\n        this.singleLayers.panoramio = layer = new google.maps.panoramio.PanoramioLayer();\n        layer.setTag(options.filter);\n        delete options.filter;\n\n        //click event\n        if (options.click) {\n          google.maps.event.addListener(layer, 'click', function(event) {\n            options.click(event);\n            delete options.click;\n          });\n        }\n      break;\n      case 'places':\n        this.singleLayers.places = layer = new google.maps.places.PlacesService(this.map);\n\n        //search, nearbySearch, radarSearch callback, Both are the same\n        if (options.search || options.nearbySearch || options.radarSearch) {\n          var placeSearchRequest  = {\n            bounds : options.bounds || null,\n            keyword : options.keyword || null,\n            location : options.location || null,\n            name : options.name || null,\n            radius : options.radius || null,\n            rankBy : options.rankBy || null,\n            types : options.types || null\n          };\n\n          if (options.radarSearch) {\n            layer.radarSearch(placeSearchRequest, options.radarSearch);\n          }\n\n          if (options.search) {\n            layer.search(placeSearchRequest, options.search);\n          }\n\n          if (options.nearbySearch) {\n            layer.nearbySearch(placeSearchRequest, options.nearbySearch);\n          }\n        }\n\n        //textSearch callback\n        if (options.textSearch) {\n          var textSearchRequest  = {\n            bounds : options.bounds || null,\n            location : options.location || null,\n            query : options.query || null,\n            radius : options.radius || null\n          };\n\n          layer.textSearch(textSearchRequest, options.textSearch);\n        }\n      break;\n  }\n\n  if (layer !== undefined) {\n    if (typeof layer.setOptions == 'function') {\n      layer.setOptions(options);\n    }\n    if (typeof layer.setMap == 'function') {\n      layer.setMap(this.map);\n    }\n\n    return layer;\n  }\n};\n\nGMaps.prototype.removeLayer = function(layer) {\n  if (typeof(layer) == \"string\" && this.singleLayers[layer] !== undefined) {\n     this.singleLayers[layer].setMap(null);\n\n     delete this.singleLayers[layer];\n  }\n  else {\n    for (var i = 0; i < this.layers.length; i++) {\n      if (this.layers[i] === layer) {\n        this.layers[i].setMap(null);\n        this.layers.splice(i, 1);\n\n        break;\n      }\n    }\n  }\n};\n\nvar travelMode, unitSystem;\n\nGMaps.prototype.getRoutes = function(options) {\n  switch (options.travelMode) {\n    case 'bicycling':\n      travelMode = google.maps.TravelMode.BICYCLING;\n      break;\n    case 'transit':\n      travelMode = google.maps.TravelMode.TRANSIT;\n      break;\n    case 'driving':\n      travelMode = google.maps.TravelMode.DRIVING;\n      break;\n    default:\n      travelMode = google.maps.TravelMode.WALKING;\n      break;\n  }\n\n  if (options.unitSystem === 'imperial') {\n    unitSystem = google.maps.UnitSystem.IMPERIAL;\n  }\n  else {\n    unitSystem = google.maps.UnitSystem.METRIC;\n  }\n\n  var base_options = {\n        avoidHighways: false,\n        avoidTolls: false,\n        optimizeWaypoints: false,\n        waypoints: []\n      },\n      request_options =  extend_object(base_options, options);\n\n  request_options.origin = /string/.test(typeof options.origin) ? options.origin : new google.maps.LatLng(options.origin[0], options.origin[1]);\n  request_options.destination = /string/.test(typeof options.destination) ? options.destination : new google.maps.LatLng(options.destination[0], options.destination[1]);\n  request_options.travelMode = travelMode;\n  request_options.unitSystem = unitSystem;\n\n  delete request_options.callback;\n  delete request_options.error;\n\n  var self = this,\n      routes = [],\n      service = new google.maps.DirectionsService();\n\n  service.route(request_options, function(result, status) {\n    if (status === google.maps.DirectionsStatus.OK) {\n      for (var r in result.routes) {\n        if (result.routes.hasOwnProperty(r)) {\n          routes.push(result.routes[r]);\n        }\n      }\n\n      if (options.callback) {\n        options.callback(routes, result, status);\n      }\n    }\n    else {\n      if (options.error) {\n        options.error(result, status);\n      }\n    }\n  });\n};\n\nGMaps.prototype.removeRoutes = function() {\n  this.routes.length = 0;\n};\n\nGMaps.prototype.getElevations = function(options) {\n  options = extend_object({\n    locations: [],\n    path : false,\n    samples : 256\n  }, options);\n\n  if (options.locations.length > 0) {\n    if (options.locations[0].length > 0) {\n      options.locations = array_flat(array_map([options.locations], arrayToLatLng,  false));\n    }\n  }\n\n  var callback = options.callback;\n  delete options.callback;\n\n  var service = new google.maps.ElevationService();\n\n  //location request\n  if (!options.path) {\n    delete options.path;\n    delete options.samples;\n\n    service.getElevationForLocations(options, function(result, status) {\n      if (callback && typeof(callback) === \"function\") {\n        callback(result, status);\n      }\n    });\n  //path request\n  } else {\n    var pathRequest = {\n      path : options.locations,\n      samples : options.samples\n    };\n\n    service.getElevationAlongPath(pathRequest, function(result, status) {\n     if (callback && typeof(callback) === \"function\") {\n        callback(result, status);\n      }\n    });\n  }\n};\n\nGMaps.prototype.cleanRoute = GMaps.prototype.removePolylines;\n\nGMaps.prototype.renderRoute = function(options, renderOptions) {\n  var self = this,\n      panel = ((typeof renderOptions.panel === 'string') ? document.getElementById(renderOptions.panel.replace('#', '')) : renderOptions.panel),\n      display;\n\n  renderOptions.panel = panel;\n  renderOptions = extend_object({\n    map: this.map\n  }, renderOptions);\n  display = new google.maps.DirectionsRenderer(renderOptions);\n\n  this.getRoutes({\n    origin: options.origin,\n    destination: options.destination,\n    travelMode: options.travelMode,\n    waypoints: options.waypoints,\n    unitSystem: options.unitSystem,\n    error: options.error,\n    avoidHighways: options.avoidHighways,\n    avoidTolls: options.avoidTolls,\n    optimizeWaypoints: options.optimizeWaypoints,\n    callback: function(routes, response, status) {\n      if (status === google.maps.DirectionsStatus.OK) {\n        display.setDirections(response);\n      }\n    }\n  });\n};\n\nGMaps.prototype.drawRoute = function(options) {\n  var self = this;\n\n  this.getRoutes({\n    origin: options.origin,\n    destination: options.destination,\n    travelMode: options.travelMode,\n    waypoints: options.waypoints,\n    unitSystem: options.unitSystem,\n    error: options.error,\n    avoidHighways: options.avoidHighways,\n    avoidTolls: options.avoidTolls,\n    optimizeWaypoints: options.optimizeWaypoints,\n    callback: function(routes) {\n      if (routes.length > 0) {\n        var polyline_options = {\n          path: routes[routes.length - 1].overview_path,\n          strokeColor: options.strokeColor,\n          strokeOpacity: options.strokeOpacity,\n          strokeWeight: options.strokeWeight\n        };\n\n        if (options.hasOwnProperty(\"icons\")) {\n          polyline_options.icons = options.icons;\n        }\n\n        self.drawPolyline(polyline_options);\n\n        if (options.callback) {\n          options.callback(routes[routes.length - 1]);\n        }\n      }\n    }\n  });\n};\n\nGMaps.prototype.travelRoute = function(options) {\n  if (options.origin && options.destination) {\n    this.getRoutes({\n      origin: options.origin,\n      destination: options.destination,\n      travelMode: options.travelMode,\n      waypoints : options.waypoints,\n      unitSystem: options.unitSystem,\n      error: options.error,\n      callback: function(e) {\n        //start callback\n        if (e.length > 0 && options.start) {\n          options.start(e[e.length - 1]);\n        }\n\n        //step callback\n        if (e.length > 0 && options.step) {\n          var route = e[e.length - 1];\n          if (route.legs.length > 0) {\n            var steps = route.legs[0].steps;\n            for (var i = 0, step; step = steps[i]; i++) {\n              step.step_number = i;\n              options.step(step, (route.legs[0].steps.length - 1));\n            }\n          }\n        }\n\n        //end callback\n        if (e.length > 0 && options.end) {\n           options.end(e[e.length - 1]);\n        }\n      }\n    });\n  }\n  else if (options.route) {\n    if (options.route.legs.length > 0) {\n      var steps = options.route.legs[0].steps;\n      for (var i = 0, step; step = steps[i]; i++) {\n        step.step_number = i;\n        options.step(step);\n      }\n    }\n  }\n};\n\nGMaps.prototype.drawSteppedRoute = function(options) {\n  var self = this;\n\n  if (options.origin && options.destination) {\n    this.getRoutes({\n      origin: options.origin,\n      destination: options.destination,\n      travelMode: options.travelMode,\n      waypoints : options.waypoints,\n      error: options.error,\n      callback: function(e) {\n        //start callback\n        if (e.length > 0 && options.start) {\n          options.start(e[e.length - 1]);\n        }\n\n        //step callback\n        if (e.length > 0 && options.step) {\n          var route = e[e.length - 1];\n          if (route.legs.length > 0) {\n            var steps = route.legs[0].steps;\n            for (var i = 0, step; step = steps[i]; i++) {\n              step.step_number = i;\n              var polyline_options = {\n                path: step.path,\n                strokeColor: options.strokeColor,\n                strokeOpacity: options.strokeOpacity,\n                strokeWeight: options.strokeWeight\n              };\n\n              if (options.hasOwnProperty(\"icons\")) {\n                polyline_options.icons = options.icons;\n              }\n\n              self.drawPolyline(polyline_options);\n              options.step(step, (route.legs[0].steps.length - 1));\n            }\n          }\n        }\n\n        //end callback\n        if (e.length > 0 && options.end) {\n           options.end(e[e.length - 1]);\n        }\n      }\n    });\n  }\n  else if (options.route) {\n    if (options.route.legs.length > 0) {\n      var steps = options.route.legs[0].steps;\n      for (var i = 0, step; step = steps[i]; i++) {\n        step.step_number = i;\n        var polyline_options = {\n          path: step.path,\n          strokeColor: options.strokeColor,\n          strokeOpacity: options.strokeOpacity,\n          strokeWeight: options.strokeWeight\n        };\n\n        if (options.hasOwnProperty(\"icons\")) {\n          polyline_options.icons = options.icons;\n        }\n\n        self.drawPolyline(polyline_options);\n        options.step(step);\n      }\n    }\n  }\n};\n\nGMaps.Route = function(options) {\n  this.origin = options.origin;\n  this.destination = options.destination;\n  this.waypoints = options.waypoints;\n\n  this.map = options.map;\n  this.route = options.route;\n  this.step_count = 0;\n  this.steps = this.route.legs[0].steps;\n  this.steps_length = this.steps.length;\n\n  var polyline_options = {\n    path: new google.maps.MVCArray(),\n    strokeColor: options.strokeColor,\n    strokeOpacity: options.strokeOpacity,\n    strokeWeight: options.strokeWeight\n  };\n\n  if (options.hasOwnProperty(\"icons\")) {\n    polyline_options.icons = options.icons;\n  }\n\n  this.polyline = this.map.drawPolyline(polyline_options).getPath();\n};\n\nGMaps.Route.prototype.getRoute = function(options) {\n  var self = this;\n\n  this.map.getRoutes({\n    origin : this.origin,\n    destination : this.destination,\n    travelMode : options.travelMode,\n    waypoints : this.waypoints || [],\n    error: options.error,\n    callback : function() {\n      self.route = e[0];\n\n      if (options.callback) {\n        options.callback.call(self);\n      }\n    }\n  });\n};\n\nGMaps.Route.prototype.back = function() {\n  if (this.step_count > 0) {\n    this.step_count--;\n    var path = this.route.legs[0].steps[this.step_count].path;\n\n    for (var p in path){\n      if (path.hasOwnProperty(p)){\n        this.polyline.pop();\n      }\n    }\n  }\n};\n\nGMaps.Route.prototype.forward = function() {\n  if (this.step_count < this.steps_length) {\n    var path = this.route.legs[0].steps[this.step_count].path;\n\n    for (var p in path){\n      if (path.hasOwnProperty(p)){\n        this.polyline.push(path[p]);\n      }\n    }\n    this.step_count++;\n  }\n};\n\nGMaps.prototype.checkGeofence = function(lat, lng, fence) {\n  return fence.containsLatLng(new google.maps.LatLng(lat, lng));\n};\n\nGMaps.prototype.checkMarkerGeofence = function(marker, outside_callback) {\n  if (marker.fences) {\n    for (var i = 0, fence; fence = marker.fences[i]; i++) {\n      var pos = marker.getPosition();\n      if (!this.checkGeofence(pos.lat(), pos.lng(), fence)) {\n        outside_callback(marker, fence);\n      }\n    }\n  }\n};\n\nGMaps.prototype.toImage = function(options) {\n  var options = options || {},\n      static_map_options = {};\n\n  static_map_options['size'] = options['size'] || [this.el.clientWidth, this.el.clientHeight];\n  static_map_options['lat'] = this.getCenter().lat();\n  static_map_options['lng'] = this.getCenter().lng();\n\n  if (this.markers.length > 0) {\n    static_map_options['markers'] = [];\n    \n    for (var i = 0; i < this.markers.length; i++) {\n      static_map_options['markers'].push({\n        lat: this.markers[i].getPosition().lat(),\n        lng: this.markers[i].getPosition().lng()\n      });\n    }\n  }\n\n  if (this.polylines.length > 0) {\n    var polyline = this.polylines[0];\n    \n    static_map_options['polyline'] = {};\n    static_map_options['polyline']['path'] = google.maps.geometry.encoding.encodePath(polyline.getPath());\n    static_map_options['polyline']['strokeColor'] = polyline.strokeColor\n    static_map_options['polyline']['strokeOpacity'] = polyline.strokeOpacity\n    static_map_options['polyline']['strokeWeight'] = polyline.strokeWeight\n  }\n\n  return GMaps.staticMapURL(static_map_options);\n};\n\nGMaps.staticMapURL = function(options){\n  var parameters = [],\n      data,\n      static_root = (location.protocol === 'file:' ? 'http:' : location.protocol ) + '//maps.googleapis.com/maps/api/staticmap';\n\n  if (options.url) {\n    static_root = options.url;\n    delete options.url;\n  }\n\n  static_root += '?';\n\n  var markers = options.markers;\n  \n  delete options.markers;\n\n  if (!markers && options.marker) {\n    markers = [options.marker];\n    delete options.marker;\n  }\n\n  var styles = options.styles;\n\n  delete options.styles;\n\n  var polyline = options.polyline;\n  delete options.polyline;\n\n  /** Map options **/\n  if (options.center) {\n    parameters.push('center=' + options.center);\n    delete options.center;\n  }\n  else if (options.address) {\n    parameters.push('center=' + options.address);\n    delete options.address;\n  }\n  else if (options.lat) {\n    parameters.push(['center=', options.lat, ',', options.lng].join(''));\n    delete options.lat;\n    delete options.lng;\n  }\n  else if (options.visible) {\n    var visible = encodeURI(options.visible.join('|'));\n    parameters.push('visible=' + visible);\n  }\n\n  var size = options.size;\n  if (size) {\n    if (size.join) {\n      size = size.join('x');\n    }\n    delete options.size;\n  }\n  else {\n    size = '630x300';\n  }\n  parameters.push('size=' + size);\n\n  if (!options.zoom && options.zoom !== false) {\n    options.zoom = 15;\n  }\n\n  var sensor = options.hasOwnProperty('sensor') ? !!options.sensor : true;\n  delete options.sensor;\n  parameters.push('sensor=' + sensor);\n\n  for (var param in options) {\n    if (options.hasOwnProperty(param)) {\n      parameters.push(param + '=' + options[param]);\n    }\n  }\n\n  /** Markers **/\n  if (markers) {\n    var marker, loc;\n\n    for (var i = 0; data = markers[i]; i++) {\n      marker = [];\n\n      if (data.size && data.size !== 'normal') {\n        marker.push('size:' + data.size);\n        delete data.size;\n      }\n      else if (data.icon) {\n        marker.push('icon:' + encodeURI(data.icon));\n        delete data.icon;\n      }\n\n      if (data.color) {\n        marker.push('color:' + data.color.replace('#', '0x'));\n        delete data.color;\n      }\n\n      if (data.label) {\n        marker.push('label:' + data.label[0].toUpperCase());\n        delete data.label;\n      }\n\n      loc = (data.address ? data.address : data.lat + ',' + data.lng);\n      delete data.address;\n      delete data.lat;\n      delete data.lng;\n\n      for(var param in data){\n        if (data.hasOwnProperty(param)) {\n          marker.push(param + ':' + data[param]);\n        }\n      }\n\n      if (marker.length || i === 0) {\n        marker.push(loc);\n        marker = marker.join('|');\n        parameters.push('markers=' + encodeURI(marker));\n      }\n      // New marker without styles\n      else {\n        marker = parameters.pop() + encodeURI('|' + loc);\n        parameters.push(marker);\n      }\n    }\n  }\n\n  /** Map Styles **/\n  if (styles) {\n    for (var i = 0; i < styles.length; i++) {\n      var styleRule = [];\n      if (styles[i].featureType){\n        styleRule.push('feature:' + styles[i].featureType.toLowerCase());\n      }\n\n      if (styles[i].elementType) {\n        styleRule.push('element:' + styles[i].elementType.toLowerCase());\n      }\n\n      for (var j = 0; j < styles[i].stylers.length; j++) {\n        for (var p in styles[i].stylers[j]) {\n          var ruleArg = styles[i].stylers[j][p];\n          if (p == 'hue' || p == 'color') {\n            ruleArg = '0x' + ruleArg.substring(1);\n          }\n          styleRule.push(p + ':' + ruleArg);\n        }\n      }\n\n      var rule = styleRule.join('|');\n      if (rule != '') {\n        parameters.push('style=' + rule);\n      }\n    }\n  }\n\n  /** Polylines **/\n  function parseColor(color, opacity) {\n    if (color[0] === '#'){\n      color = color.replace('#', '0x');\n\n      if (opacity) {\n        opacity = parseFloat(opacity);\n        opacity = Math.min(1, Math.max(opacity, 0));\n        if (opacity === 0) {\n          return '0x00000000';\n        }\n        opacity = (opacity * 255).toString(16);\n        if (opacity.length === 1) {\n          opacity += opacity;\n        }\n\n        color = color.slice(0,8) + opacity;\n      }\n    }\n    return color;\n  }\n\n  if (polyline) {\n    data = polyline;\n    polyline = [];\n\n    if (data.strokeWeight) {\n      polyline.push('weight:' + parseInt(data.strokeWeight, 10));\n    }\n\n    if (data.strokeColor) {\n      var color = parseColor(data.strokeColor, data.strokeOpacity);\n      polyline.push('color:' + color);\n    }\n\n    if (data.fillColor) {\n      var fillcolor = parseColor(data.fillColor, data.fillOpacity);\n      polyline.push('fillcolor:' + fillcolor);\n    }\n\n    var path = data.path;\n    if (path.join) {\n      for (var j=0, pos; pos=path[j]; j++) {\n        polyline.push(pos.join(','));\n      }\n    }\n    else {\n      polyline.push('enc:' + path);\n    }\n\n    polyline = polyline.join('|');\n    parameters.push('path=' + encodeURI(polyline));\n  }\n\n  /** Retina support **/\n  var dpi = window.devicePixelRatio || 1;\n  parameters.push('scale=' + dpi);\n\n  parameters = parameters.join('&');\n  return static_root + parameters;\n};\n\nGMaps.prototype.addMapType = function(mapTypeId, options) {\n  if (options.hasOwnProperty(\"getTileUrl\") && typeof(options[\"getTileUrl\"]) == \"function\") {\n    options.tileSize = options.tileSize || new google.maps.Size(256, 256);\n\n    var mapType = new google.maps.ImageMapType(options);\n\n    this.map.mapTypes.set(mapTypeId, mapType);\n  }\n  else {\n    throw \"'getTileUrl' function required.\";\n  }\n};\n\nGMaps.prototype.addOverlayMapType = function(options) {\n  if (options.hasOwnProperty(\"getTile\") && typeof(options[\"getTile\"]) == \"function\") {\n    var overlayMapTypeIndex = options.index;\n\n    delete options.index;\n\n    this.map.overlayMapTypes.insertAt(overlayMapTypeIndex, options);\n  }\n  else {\n    throw \"'getTile' function required.\";\n  }\n};\n\nGMaps.prototype.removeOverlayMapType = function(overlayMapTypeIndex) {\n  this.map.overlayMapTypes.removeAt(overlayMapTypeIndex);\n};\n\nGMaps.prototype.addStyle = function(options) {\n  var styledMapType = new google.maps.StyledMapType(options.styles, { name: options.styledMapName });\n\n  this.map.mapTypes.set(options.mapTypeId, styledMapType);\n};\n\nGMaps.prototype.setStyle = function(mapTypeId) {\n  this.map.setMapTypeId(mapTypeId);\n};\n\nGMaps.prototype.createPanorama = function(streetview_options) {\n  if (!streetview_options.hasOwnProperty('lat') || !streetview_options.hasOwnProperty('lng')) {\n    streetview_options.lat = this.getCenter().lat();\n    streetview_options.lng = this.getCenter().lng();\n  }\n\n  this.panorama = GMaps.createPanorama(streetview_options);\n\n  this.map.setStreetView(this.panorama);\n\n  return this.panorama;\n};\n\nGMaps.createPanorama = function(options) {\n  var el = getElementById(options.el, options.context);\n\n  options.position = new google.maps.LatLng(options.lat, options.lng);\n\n  delete options.el;\n  delete options.context;\n  delete options.lat;\n  delete options.lng;\n\n  var streetview_events = ['closeclick', 'links_changed', 'pano_changed', 'position_changed', 'pov_changed', 'resize', 'visible_changed'],\n      streetview_options = extend_object({visible : true}, options);\n\n  for (var i = 0; i < streetview_events.length; i++) {\n    delete streetview_options[streetview_events[i]];\n  }\n\n  var panorama = new google.maps.StreetViewPanorama(el, streetview_options);\n\n  for (var i = 0; i < streetview_events.length; i++) {\n    (function(object, name) {\n      if (options[name]) {\n        google.maps.event.addListener(object, name, function(){\n          options[name].apply(this);\n        });\n      }\n    })(panorama, streetview_events[i]);\n  }\n\n  return panorama;\n};\n\nGMaps.prototype.on = function(event_name, handler) {\n  return GMaps.on(event_name, this, handler);\n};\n\nGMaps.prototype.off = function(event_name) {\n  GMaps.off(event_name, this);\n};\n\nGMaps.prototype.once = function(event_name, handler) {\n  return GMaps.once(event_name, this, handler);\n};\n\nGMaps.custom_events = ['marker_added', 'marker_removed', 'polyline_added', 'polyline_removed', 'polygon_added', 'polygon_removed', 'geolocated', 'geolocation_failed'];\n\nGMaps.on = function(event_name, object, handler) {\n  if (GMaps.custom_events.indexOf(event_name) == -1) {\n    if(object instanceof GMaps) object = object.map; \n    return google.maps.event.addListener(object, event_name, handler);\n  }\n  else {\n    var registered_event = {\n      handler : handler,\n      eventName : event_name\n    };\n\n    object.registered_events[event_name] = object.registered_events[event_name] || [];\n    object.registered_events[event_name].push(registered_event);\n\n    return registered_event;\n  }\n};\n\nGMaps.off = function(event_name, object) {\n  if (GMaps.custom_events.indexOf(event_name) == -1) {\n    if(object instanceof GMaps) object = object.map; \n    google.maps.event.clearListeners(object, event_name);\n  }\n  else {\n    object.registered_events[event_name] = [];\n  }\n};\n\nGMaps.once = function(event_name, object, handler) {\n  if (GMaps.custom_events.indexOf(event_name) == -1) {\n    if(object instanceof GMaps) object = object.map;\n    return google.maps.event.addListenerOnce(object, event_name, handler);\n  }\n};\n\nGMaps.fire = function(event_name, object, scope) {\n  if (GMaps.custom_events.indexOf(event_name) == -1) {\n    google.maps.event.trigger(object, event_name, Array.prototype.slice.apply(arguments).slice(2));\n  }\n  else {\n    if(event_name in scope.registered_events) {\n      var firing_events = scope.registered_events[event_name];\n\n      for(var i = 0; i < firing_events.length; i++) {\n        (function(handler, scope, object) {\n          handler.apply(scope, [object]);\n        })(firing_events[i]['handler'], scope, object);\n      }\n    }\n  }\n};\n\nGMaps.geolocate = function(options) {\n  var complete_callback = options.always || options.complete;\n\n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(function(position) {\n      options.success(position);\n\n      if (complete_callback) {\n        complete_callback();\n      }\n    }, function(error) {\n      options.error(error);\n\n      if (complete_callback) {\n        complete_callback();\n      }\n    }, options.options);\n  }\n  else {\n    options.not_supported();\n\n    if (complete_callback) {\n      complete_callback();\n    }\n  }\n};\n\nGMaps.geocode = function(options) {\n  this.geocoder = new google.maps.Geocoder();\n  var callback = options.callback;\n  if (options.hasOwnProperty('lat') && options.hasOwnProperty('lng')) {\n    options.latLng = new google.maps.LatLng(options.lat, options.lng);\n  }\n\n  delete options.lat;\n  delete options.lng;\n  delete options.callback;\n  \n  this.geocoder.geocode(options, function(results, status) {\n    callback(results, status);\n  });\n};\n\nif (typeof window.google === 'object' && window.google.maps) {\n  //==========================\n  // Polygon containsLatLng\n  // https://github.com/tparkin/Google-Maps-Point-in-Polygon\n  // Poygon getBounds extension - google-maps-extensions\n  // http://code.google.com/p/google-maps-extensions/source/browse/google.maps.Polygon.getBounds.js\n  if (!google.maps.Polygon.prototype.getBounds) {\n    google.maps.Polygon.prototype.getBounds = function(latLng) {\n      var bounds = new google.maps.LatLngBounds();\n      var paths = this.getPaths();\n      var path;\n\n      for (var p = 0; p < paths.getLength(); p++) {\n        path = paths.getAt(p);\n        for (var i = 0; i < path.getLength(); i++) {\n          bounds.extend(path.getAt(i));\n        }\n      }\n\n      return bounds;\n    };\n  }\n\n  if (!google.maps.Polygon.prototype.containsLatLng) {\n    // Polygon containsLatLng - method to determine if a latLng is within a polygon\n    google.maps.Polygon.prototype.containsLatLng = function(latLng) {\n      // Exclude points outside of bounds as there is no way they are in the poly\n      var bounds = this.getBounds();\n\n      if (bounds !== null && !bounds.contains(latLng)) {\n        return false;\n      }\n\n      // Raycast point in polygon method\n      var inPoly = false;\n\n      var numPaths = this.getPaths().getLength();\n      for (var p = 0; p < numPaths; p++) {\n        var path = this.getPaths().getAt(p);\n        var numPoints = path.getLength();\n        var j = numPoints - 1;\n\n        for (var i = 0; i < numPoints; i++) {\n          var vertex1 = path.getAt(i);\n          var vertex2 = path.getAt(j);\n\n          if (vertex1.lng() < latLng.lng() && vertex2.lng() >= latLng.lng() || vertex2.lng() < latLng.lng() && vertex1.lng() >= latLng.lng()) {\n            if (vertex1.lat() + (latLng.lng() - vertex1.lng()) / (vertex2.lng() - vertex1.lng()) * (vertex2.lat() - vertex1.lat()) < latLng.lat()) {\n              inPoly = !inPoly;\n            }\n          }\n\n          j = i;\n        }\n      }\n\n      return inPoly;\n    };\n  }\n\n  if (!google.maps.Circle.prototype.containsLatLng) {\n    google.maps.Circle.prototype.containsLatLng = function(latLng) {\n      if (google.maps.geometry) {\n        return google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(), latLng) <= this.getRadius();\n      }\n      else {\n        return true;\n      }\n    };\n  }\n\n  google.maps.Rectangle.prototype.containsLatLng = function(latLng) {\n    return this.getBounds().contains(latLng);\n  };\n\n  google.maps.LatLngBounds.prototype.containsLatLng = function(latLng) {\n    return this.contains(latLng);\n  };\n\n  google.maps.Marker.prototype.setFences = function(fences) {\n    this.fences = fences;\n  };\n\n  google.maps.Marker.prototype.addFence = function(fence) {\n    this.fences.push(fence);\n  };\n\n  google.maps.Marker.prototype.getId = function() {\n    return this['__gm_id'];\n  };\n}\n\n//==========================\n// Array indexOf\n// https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf\nif (!Array.prototype.indexOf) {\n  Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {\n      \"use strict\";\n      if (this == null) {\n          throw new TypeError();\n      }\n      var t = Object(this);\n      var len = t.length >>> 0;\n      if (len === 0) {\n          return -1;\n      }\n      var n = 0;\n      if (arguments.length > 1) {\n          n = Number(arguments[1]);\n          if (n != n) { // shortcut for verifying if it's NaN\n              n = 0;\n          } else if (n != 0 && n != Infinity && n != -Infinity) {\n              n = (n > 0 || -1) * Math.floor(Math.abs(n));\n          }\n      }\n      if (n >= len) {\n          return -1;\n      }\n      var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n      for (; k < len; k++) {\n          if (k in t && t[k] === searchElement) {\n              return k;\n          }\n      }\n      return -1;\n  }\n}\n\nreturn GMaps;\n}));\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}